// File generated from our OpenAPI spec by Stainless.

package com.telnyx.sdk.models.webhooks

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.telnyx.sdk.core.JsonValue
import com.telnyx.sdk.core.jsonMapper
import com.telnyx.sdk.errors.TelnyxInvalidDataException
import com.telnyx.sdk.models.InboundMessagePayload
import com.telnyx.sdk.models.SubNumberOrderRegulatoryRequirementWithValue
import com.telnyx.sdk.models.calls.CustomSipHeader
import com.telnyx.sdk.models.calls.SipHeader
import com.telnyx.sdk.models.messages.MessagingError
import com.telnyx.sdk.models.messages.OutboundMessagePayload
import com.telnyx.sdk.models.numberorders.NumberOrderWithPhoneNumbers
import com.telnyx.sdk.models.numberorders.PhoneNumber
import java.time.OffsetDateTime
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test
import org.junit.jupiter.api.assertThrows
import org.junit.jupiter.params.ParameterizedTest
import org.junit.jupiter.params.provider.EnumSource

internal class UnwrapWebhookEventTest {

    @Test
    fun ofCallAiGatherEnded() {
        val callAiGatherEnded =
            CallAiGatherEndedWebhookEvent.builder()
                .data(
                    CallAiGatherEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallAiGatherEnded.EventType.CALL_AI_GATHER_ENDED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallAiGatherEnded.Payload.builder()
                                .callControlId(
                                    "v2:T02llQxIyaRkhfRKxgAP8nY511EhFLizdvdUKJiSw8d6A9BborherQ"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .from("+35319605860")
                                .addMessageHistory(
                                    CallAiGatherEnded.Payload.MessageHistory.builder()
                                        .content(
                                            "Hello, can you tell me your age and where you live?"
                                        )
                                        .role(
                                            CallAiGatherEnded.Payload.MessageHistory.Role.ASSISTANT
                                        )
                                        .build()
                                )
                                .addMessageHistory(
                                    CallAiGatherEnded.Payload.MessageHistory.builder()
                                        .content("Hello, I'm 29 and I live in Paris?")
                                        .role(CallAiGatherEnded.Payload.MessageHistory.Role.USER)
                                        .build()
                                )
                                .result(
                                    CallAiGatherEnded.Payload.Result.builder()
                                        .putAdditionalProperty("age", JsonValue.from("bar"))
                                        .putAdditionalProperty("city", JsonValue.from("bar"))
                                        .build()
                                )
                                .status(CallAiGatherEnded.Payload.Status.VALID)
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallAiGatherEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallAiGatherEnded(callAiGatherEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).contains(callAiGatherEnded)
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallAiGatherEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallAiGatherEnded(
                CallAiGatherEndedWebhookEvent.builder()
                    .data(
                        CallAiGatherEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallAiGatherEnded.EventType.CALL_AI_GATHER_ENDED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallAiGatherEnded.Payload.builder()
                                    .callControlId(
                                        "v2:T02llQxIyaRkhfRKxgAP8nY511EhFLizdvdUKJiSw8d6A9BborherQ"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .from("+35319605860")
                                    .addMessageHistory(
                                        CallAiGatherEnded.Payload.MessageHistory.builder()
                                            .content(
                                                "Hello, can you tell me your age and where you live?"
                                            )
                                            .role(
                                                CallAiGatherEnded.Payload.MessageHistory.Role
                                                    .ASSISTANT
                                            )
                                            .build()
                                    )
                                    .addMessageHistory(
                                        CallAiGatherEnded.Payload.MessageHistory.builder()
                                            .content("Hello, I'm 29 and I live in Paris?")
                                            .role(
                                                CallAiGatherEnded.Payload.MessageHistory.Role.USER
                                            )
                                            .build()
                                    )
                                    .result(
                                        CallAiGatherEnded.Payload.Result.builder()
                                            .putAdditionalProperty("age", JsonValue.from("bar"))
                                            .putAdditionalProperty("city", JsonValue.from("bar"))
                                            .build()
                                    )
                                    .status(CallAiGatherEnded.Payload.Status.VALID)
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallAiGatherEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallAiGatherMessageHistoryUpdated() {
        val callAiGatherMessageHistoryUpdated =
            CallAiGatherMessageHistoryUpdatedWebhookEvent.builder()
                .data(
                    CallAiGatherMessageHistoryUpdated.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(
                            CallAiGatherMessageHistoryUpdated.EventType
                                .CALL_AI_GATHER_MESSAGE_HISTORY_UPDATED
                        )
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallAiGatherMessageHistoryUpdated.Payload.builder()
                                .callControlId(
                                    "v2:T02llQxIyaRkhfRKxgAP8nY511EhFLizdvdUKJiSw8d6A9BborherQ"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .from("+35319605860")
                                .addMessageHistory(
                                    CallAiGatherMessageHistoryUpdated.Payload.MessageHistory
                                        .builder()
                                        .content(
                                            "Hello, can you tell me your age and where you live?"
                                        )
                                        .role(
                                            CallAiGatherMessageHistoryUpdated.Payload.MessageHistory
                                                .Role
                                                .ASSISTANT
                                        )
                                        .build()
                                )
                                .addMessageHistory(
                                    CallAiGatherMessageHistoryUpdated.Payload.MessageHistory
                                        .builder()
                                        .content("Hello, I'm 29 and I live in Paris?")
                                        .role(
                                            CallAiGatherMessageHistoryUpdated.Payload.MessageHistory
                                                .Role
                                                .USER
                                        )
                                        .build()
                                )
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallAiGatherMessageHistoryUpdated.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallAiGatherMessageHistoryUpdated(
                callAiGatherMessageHistoryUpdated
            )

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated())
            .contains(callAiGatherMessageHistoryUpdated)
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallAiGatherMessageHistoryUpdatedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallAiGatherMessageHistoryUpdated(
                CallAiGatherMessageHistoryUpdatedWebhookEvent.builder()
                    .data(
                        CallAiGatherMessageHistoryUpdated.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                CallAiGatherMessageHistoryUpdated.EventType
                                    .CALL_AI_GATHER_MESSAGE_HISTORY_UPDATED
                            )
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallAiGatherMessageHistoryUpdated.Payload.builder()
                                    .callControlId(
                                        "v2:T02llQxIyaRkhfRKxgAP8nY511EhFLizdvdUKJiSw8d6A9BborherQ"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .from("+35319605860")
                                    .addMessageHistory(
                                        CallAiGatherMessageHistoryUpdated.Payload.MessageHistory
                                            .builder()
                                            .content(
                                                "Hello, can you tell me your age and where you live?"
                                            )
                                            .role(
                                                CallAiGatherMessageHistoryUpdated.Payload
                                                    .MessageHistory
                                                    .Role
                                                    .ASSISTANT
                                            )
                                            .build()
                                    )
                                    .addMessageHistory(
                                        CallAiGatherMessageHistoryUpdated.Payload.MessageHistory
                                            .builder()
                                            .content("Hello, I'm 29 and I live in Paris?")
                                            .role(
                                                CallAiGatherMessageHistoryUpdated.Payload
                                                    .MessageHistory
                                                    .Role
                                                    .USER
                                            )
                                            .build()
                                    )
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallAiGatherMessageHistoryUpdated.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallAiGatherPartialResults() {
        val callAiGatherPartialResults =
            CallAiGatherPartialResultsWebhookEvent.builder()
                .data(
                    CallAiGatherPartialResults.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(
                            CallAiGatherPartialResults.EventType.CALL_AI_GATHER_PARTIAL_RESULTS
                        )
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallAiGatherPartialResults.Payload.builder()
                                .callControlId(
                                    "v2:T02llQxIyaRkhfRKxgAP8nY511EhFLizdvdUKJiSw8d6A9BborherQ"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .from("+35319605860")
                                .addMessageHistory(
                                    CallAiGatherPartialResults.Payload.MessageHistory.builder()
                                        .content(
                                            "Hello, can you tell me your age and where you live?"
                                        )
                                        .role(
                                            CallAiGatherPartialResults.Payload.MessageHistory.Role
                                                .ASSISTANT
                                        )
                                        .build()
                                )
                                .addMessageHistory(
                                    CallAiGatherPartialResults.Payload.MessageHistory.builder()
                                        .content("Hello, I'm 29 and I live in Paris?")
                                        .role(
                                            CallAiGatherPartialResults.Payload.MessageHistory.Role
                                                .USER
                                        )
                                        .build()
                                )
                                .partialResults(
                                    CallAiGatherPartialResults.Payload.PartialResults.builder()
                                        .putAdditionalProperty("age", JsonValue.from("bar"))
                                        .putAdditionalProperty("city", JsonValue.from("bar"))
                                        .build()
                                )
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallAiGatherPartialResults.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallAiGatherPartialResults(callAiGatherPartialResults)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults())
            .contains(callAiGatherPartialResults)
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallAiGatherPartialResultsRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallAiGatherPartialResults(
                CallAiGatherPartialResultsWebhookEvent.builder()
                    .data(
                        CallAiGatherPartialResults.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                CallAiGatherPartialResults.EventType.CALL_AI_GATHER_PARTIAL_RESULTS
                            )
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallAiGatherPartialResults.Payload.builder()
                                    .callControlId(
                                        "v2:T02llQxIyaRkhfRKxgAP8nY511EhFLizdvdUKJiSw8d6A9BborherQ"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .from("+35319605860")
                                    .addMessageHistory(
                                        CallAiGatherPartialResults.Payload.MessageHistory.builder()
                                            .content(
                                                "Hello, can you tell me your age and where you live?"
                                            )
                                            .role(
                                                CallAiGatherPartialResults.Payload.MessageHistory
                                                    .Role
                                                    .ASSISTANT
                                            )
                                            .build()
                                    )
                                    .addMessageHistory(
                                        CallAiGatherPartialResults.Payload.MessageHistory.builder()
                                            .content("Hello, I'm 29 and I live in Paris?")
                                            .role(
                                                CallAiGatherPartialResults.Payload.MessageHistory
                                                    .Role
                                                    .USER
                                            )
                                            .build()
                                    )
                                    .partialResults(
                                        CallAiGatherPartialResults.Payload.PartialResults.builder()
                                            .putAdditionalProperty("age", JsonValue.from("bar"))
                                            .putAdditionalProperty("city", JsonValue.from("bar"))
                                            .build()
                                    )
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallAiGatherPartialResults.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallAnswered() {
        val callAnswered =
            CallAnsweredWebhookEvent.builder()
                .data(
                    CallAnswered.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallAnswered.EventType.CALL_ANSWERED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallAnswered.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .addCustomHeader(
                                    CustomSipHeader.builder().name("head_1").value("val_1").build()
                                )
                                .addCustomHeader(
                                    CustomSipHeader.builder().name("head_2").value("val_2").build()
                                )
                                .from("+35319605860")
                                .addSipHeader(
                                    SipHeader.builder()
                                        .name(SipHeader.Name.USER_TO_USER)
                                        .value("1234")
                                        .build()
                                )
                                .addSipHeader(
                                    SipHeader.builder()
                                        .name(SipHeader.Name.USER_TO_USER)
                                        .value("<sip:111@192.168.1.1>")
                                        .build()
                                )
                                .startTime(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                                .state(CallAnswered.Payload.State.ANSWERED)
                                .addTag("tag-01")
                                .addTag("tag-02")
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallAnswered.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallAnswered(callAnswered)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).contains(callAnswered)
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallAnsweredRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallAnswered(
                CallAnsweredWebhookEvent.builder()
                    .data(
                        CallAnswered.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallAnswered.EventType.CALL_ANSWERED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallAnswered.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .addCustomHeader(
                                        CustomSipHeader.builder()
                                            .name("head_1")
                                            .value("val_1")
                                            .build()
                                    )
                                    .addCustomHeader(
                                        CustomSipHeader.builder()
                                            .name("head_2")
                                            .value("val_2")
                                            .build()
                                    )
                                    .from("+35319605860")
                                    .addSipHeader(
                                        SipHeader.builder()
                                            .name(SipHeader.Name.USER_TO_USER)
                                            .value("1234")
                                            .build()
                                    )
                                    .addSipHeader(
                                        SipHeader.builder()
                                            .name(SipHeader.Name.USER_TO_USER)
                                            .value("<sip:111@192.168.1.1>")
                                            .build()
                                    )
                                    .startTime(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                                    .state(CallAnswered.Payload.State.ANSWERED)
                                    .addTag("tag-01")
                                    .addTag("tag-02")
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallAnswered.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallBridged() {
        val callBridged =
            CallBridgedWebhookEvent.builder()
                .data(
                    CallBridged.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallBridged.EventType.CALL_BRIDGED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallBridged.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .from("+35319605860")
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallBridged.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallBridged(callBridged)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).contains(callBridged)
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallBridgedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallBridged(
                CallBridgedWebhookEvent.builder()
                    .data(
                        CallBridged.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallBridged.EventType.CALL_BRIDGED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallBridged.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .from("+35319605860")
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallBridged.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallConversationEnded() {
        val callConversationEnded =
            CallConversationEndedWebhookEvent.builder()
                .data(
                    CallConversationEnded.builder()
                        .id("eb8775a6-634f-48b0-b177-d5465a8a8e9f")
                        .createdAt(OffsetDateTime.parse("2025-05-29T13:35:38.927621Z"))
                        .eventType(CallConversationEnded.EventType.CALL_CONVERSATION_ENDED)
                        .occurredAt(OffsetDateTime.parse("2025-05-29T13:35:38.817785Z"))
                        .payload(
                            CallConversationEnded.Payload.builder()
                                .assistantId("assistant-d9082b56-ba2d-4ad1-a50c-58661eb1463d")
                                .callControlId(
                                    "v3:HDR1vQHx697hpP9xZ0bhlbUOWPFPDtPcxw-nuSMuC6mGVpb0euoklQ"
                                )
                                .callLegId("cc29cce6-3c91-11f0-a8e5-02420aef3d20")
                                .callSessionId("cc29c8d6-3c91-11f0-aa7c-02420aef3d20")
                                .callingPartyType(
                                    CallConversationEnded.Payload.CallingPartyType.SIP
                                )
                                .clientState(
                                    "g3QAAAACbQAAAAtkYXRhX2NlbnRlcm0AAAADY2gxbQAAAApkZXBsb3ltZW50bQAAAARiYXNl"
                                )
                                .connectionId("2694492062593582591")
                                .conversationId("0424805b-adc1-4ff8-9f95-e1de6883ecbe")
                                .durationSec(3L)
                                .from("+13124287921")
                                .llmModel("openai/gpt-4o")
                                .sttModel("distil-whisper/distil-large-v2")
                                .to(
                                    "jamesw@assistant-d9082b56-ba2d-4ad1-a50c-58661eb1463d.sip.telnyx.com"
                                )
                                .ttsModelId("Natural")
                                .ttsProvider("telnyx")
                                .ttsVoiceId("Marissa")
                                .build()
                        )
                        .recordType(CallConversationEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallConversationEnded(callConversationEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).contains(callConversationEnded)
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallConversationEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallConversationEnded(
                CallConversationEndedWebhookEvent.builder()
                    .data(
                        CallConversationEnded.builder()
                            .id("eb8775a6-634f-48b0-b177-d5465a8a8e9f")
                            .createdAt(OffsetDateTime.parse("2025-05-29T13:35:38.927621Z"))
                            .eventType(CallConversationEnded.EventType.CALL_CONVERSATION_ENDED)
                            .occurredAt(OffsetDateTime.parse("2025-05-29T13:35:38.817785Z"))
                            .payload(
                                CallConversationEnded.Payload.builder()
                                    .assistantId("assistant-d9082b56-ba2d-4ad1-a50c-58661eb1463d")
                                    .callControlId(
                                        "v3:HDR1vQHx697hpP9xZ0bhlbUOWPFPDtPcxw-nuSMuC6mGVpb0euoklQ"
                                    )
                                    .callLegId("cc29cce6-3c91-11f0-a8e5-02420aef3d20")
                                    .callSessionId("cc29c8d6-3c91-11f0-aa7c-02420aef3d20")
                                    .callingPartyType(
                                        CallConversationEnded.Payload.CallingPartyType.SIP
                                    )
                                    .clientState(
                                        "g3QAAAACbQAAAAtkYXRhX2NlbnRlcm0AAAADY2gxbQAAAApkZXBsb3ltZW50bQAAAARiYXNl"
                                    )
                                    .connectionId("2694492062593582591")
                                    .conversationId("0424805b-adc1-4ff8-9f95-e1de6883ecbe")
                                    .durationSec(3L)
                                    .from("+13124287921")
                                    .llmModel("openai/gpt-4o")
                                    .sttModel("distil-whisper/distil-large-v2")
                                    .to(
                                        "jamesw@assistant-d9082b56-ba2d-4ad1-a50c-58661eb1463d.sip.telnyx.com"
                                    )
                                    .ttsModelId("Natural")
                                    .ttsProvider("telnyx")
                                    .ttsVoiceId("Marissa")
                                    .build()
                            )
                            .recordType(CallConversationEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallConversationInsightsGenerated() {
        val callConversationInsightsGenerated =
            CallConversationInsightsGeneratedWebhookEvent.builder()
                .data(
                    CallConversationInsightsGenerated.builder()
                        .id("898e96ef-be63-45aa-9e7d-01332bff9a97")
                        .eventType(
                            CallConversationInsightsGenerated.EventType
                                .CALL_CONVERSATION_INSIGHTS_GENERATED
                        )
                        .occurredAt(OffsetDateTime.parse("2025-02-19T17:02:49.371454Z"))
                        .payload(
                            CallConversationInsightsGenerated.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callingPartyType(
                                    CallConversationInsightsGenerated.Payload.CallingPartyType.PSTN
                                )
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .insightGroupId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .addResult(
                                    CallConversationInsightsGenerated.Payload.InsightResult
                                        .builder()
                                        .insightId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                        .result(
                                            "The user inquired about the menu at Ember & Oak. The menu offers various options, including vegetarian, vegan, and gluten-free dishes, as well as a children's menu. The restaurant also has a daily happy hour from 4 PM to 6 PM and offers takeaway and delivery services. The user found the information helpful but had to leave without making any further decisions or requests. No specific preferences or goals were expressed beyond inquiring about the menu."
                                        )
                                        .build()
                                )
                                .build()
                        )
                        .recordType(CallConversationInsightsGenerated.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallConversationInsightsGenerated(
                callConversationInsightsGenerated
            )

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated())
            .contains(callConversationInsightsGenerated)
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallConversationInsightsGeneratedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallConversationInsightsGenerated(
                CallConversationInsightsGeneratedWebhookEvent.builder()
                    .data(
                        CallConversationInsightsGenerated.builder()
                            .id("898e96ef-be63-45aa-9e7d-01332bff9a97")
                            .eventType(
                                CallConversationInsightsGenerated.EventType
                                    .CALL_CONVERSATION_INSIGHTS_GENERATED
                            )
                            .occurredAt(OffsetDateTime.parse("2025-02-19T17:02:49.371454Z"))
                            .payload(
                                CallConversationInsightsGenerated.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callingPartyType(
                                        CallConversationInsightsGenerated.Payload.CallingPartyType
                                            .PSTN
                                    )
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .insightGroupId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .addResult(
                                        CallConversationInsightsGenerated.Payload.InsightResult
                                            .builder()
                                            .insightId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                            .result(
                                                "The user inquired about the menu at Ember & Oak. The menu offers various options, including vegetarian, vegan, and gluten-free dishes, as well as a children's menu. The restaurant also has a daily happy hour from 4 PM to 6 PM and offers takeaway and delivery services. The user found the information helpful but had to leave without making any further decisions or requests. No specific preferences or goals were expressed beyond inquiring about the menu."
                                            )
                                            .build()
                                    )
                                    .build()
                            )
                            .recordType(CallConversationInsightsGenerated.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallDtmfReceived() {
        val callDtmfReceived =
            CallDtmfReceivedWebhookEvent.builder()
                .data(
                    CallDtmfReceived.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallDtmfReceived.EventType.CALL_DTMF_RECEIVED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallDtmfReceived.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .digit("#")
                                .from("+35319605860")
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallDtmfReceived.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallDtmfReceived(callDtmfReceived)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).contains(callDtmfReceived)
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallDtmfReceivedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallDtmfReceived(
                CallDtmfReceivedWebhookEvent.builder()
                    .data(
                        CallDtmfReceived.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallDtmfReceived.EventType.CALL_DTMF_RECEIVED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallDtmfReceived.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .digit("#")
                                    .from("+35319605860")
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallDtmfReceived.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallEnqueued() {
        val callEnqueued =
            CallEnqueuedWebhookEvent.builder()
                .data(
                    CallEnqueued.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallEnqueued.EventType.CALL_ENQUEUED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallEnqueued.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .currentPosition(5L)
                                .queue("support")
                                .queueAvgWaitTimeSecs(60L)
                                .build()
                        )
                        .recordType(CallEnqueued.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallEnqueued(callEnqueued)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).contains(callEnqueued)
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallEnqueuedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallEnqueued(
                CallEnqueuedWebhookEvent.builder()
                    .data(
                        CallEnqueued.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallEnqueued.EventType.CALL_ENQUEUED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallEnqueued.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .currentPosition(5L)
                                    .queue("support")
                                    .queueAvgWaitTimeSecs(60L)
                                    .build()
                            )
                            .recordType(CallEnqueued.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallForkStarted() {
        val callForkStarted =
            CallForkStartedWebhookEvent.builder()
                .data(
                    CallForkStarted.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallForkStarted.EventType.CALL_FORK_STARTED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallForkStarted.Payload.builder()
                                .callControlId(
                                    "v2:OycMASgvIjsGIAVEx8x3n9rYeKnUJx6a3V8VGhs5futnr17KZhujZA"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .streamType(CallForkStarted.Payload.StreamType.DECRYPTED)
                                .build()
                        )
                        .recordType(CallForkStarted.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallForkStarted(callForkStarted)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).contains(callForkStarted)
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallForkStartedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallForkStarted(
                CallForkStartedWebhookEvent.builder()
                    .data(
                        CallForkStarted.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallForkStarted.EventType.CALL_FORK_STARTED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallForkStarted.Payload.builder()
                                    .callControlId(
                                        "v2:OycMASgvIjsGIAVEx8x3n9rYeKnUJx6a3V8VGhs5futnr17KZhujZA"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .streamType(CallForkStarted.Payload.StreamType.DECRYPTED)
                                    .build()
                            )
                            .recordType(CallForkStarted.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallForkStopped() {
        val callForkStopped =
            CallForkStoppedWebhookEvent.builder()
                .data(
                    CallForkStopped.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallForkStopped.EventType.CALL_FORK_STOPPED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallForkStopped.Payload.builder()
                                .callControlId(
                                    "v2:OycMASgvIjsGIAVEx8x3n9rYeKnUJx6a3V8VGhs5futnr17KZhujZA"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .streamType(CallForkStopped.Payload.StreamType.DECRYPTED)
                                .build()
                        )
                        .recordType(CallForkStopped.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallForkStopped(callForkStopped)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).contains(callForkStopped)
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallForkStoppedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallForkStopped(
                CallForkStoppedWebhookEvent.builder()
                    .data(
                        CallForkStopped.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallForkStopped.EventType.CALL_FORK_STOPPED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallForkStopped.Payload.builder()
                                    .callControlId(
                                        "v2:OycMASgvIjsGIAVEx8x3n9rYeKnUJx6a3V8VGhs5futnr17KZhujZA"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .streamType(CallForkStopped.Payload.StreamType.DECRYPTED)
                                    .build()
                            )
                            .recordType(CallForkStopped.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallGatherEnded() {
        val callGatherEnded =
            CallGatherEndedWebhookEvent.builder()
                .data(
                    CallGatherEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallGatherEnded.EventType.CALL_GATHER_ENDED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallGatherEnded.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .digits("123")
                                .from("+35319605860")
                                .status(CallGatherEnded.Payload.Status.VALID)
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallGatherEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallGatherEnded(callGatherEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).contains(callGatherEnded)
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallGatherEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallGatherEnded(
                CallGatherEndedWebhookEvent.builder()
                    .data(
                        CallGatherEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallGatherEnded.EventType.CALL_GATHER_ENDED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallGatherEnded.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .digits("123")
                                    .from("+35319605860")
                                    .status(CallGatherEnded.Payload.Status.VALID)
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallGatherEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallHangup() {
        val callHangup =
            CallHangupWebhookEvent.builder()
                .data(
                    CallHangup.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallHangup.EventType.CALL_HANGUP)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallHangup.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callQualityStats(
                                    CallHangup.Payload.CallQualityStats.builder()
                                        .inbound(
                                            CallHangup.Payload.CallQualityStats.Inbound.builder()
                                                .jitterMaxVariance("2.74")
                                                .jitterPacketCount("0")
                                                .mos("4.50")
                                                .packetCount("591")
                                                .skipPacketCount("9")
                                                .build()
                                        )
                                        .outbound(
                                            CallHangup.Payload.CallQualityStats.Outbound.builder()
                                                .packetCount("0")
                                                .skipPacketCount("0")
                                                .build()
                                        )
                                        .build()
                                )
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .addCustomHeader(
                                    CustomSipHeader.builder().name("head_1").value("val_1").build()
                                )
                                .addCustomHeader(
                                    CustomSipHeader.builder().name("head_2").value("val_2").build()
                                )
                                .from("+35319605860")
                                .hangupCause(CallHangup.Payload.HangupCause.CALL_REJECTED)
                                .hangupSource(CallHangup.Payload.HangupSource.CALLER)
                                .sipHangupCause("603")
                                .addSipHeader(
                                    SipHeader.builder()
                                        .name(SipHeader.Name.USER_TO_USER)
                                        .value("1234")
                                        .build()
                                )
                                .addSipHeader(
                                    SipHeader.builder()
                                        .name(SipHeader.Name.USER_TO_USER)
                                        .value("<sip:111@192.168.1.1>")
                                        .build()
                                )
                                .startTime(OffsetDateTime.parse("2018-02-02T22:20:27.521992Z"))
                                .state(CallHangup.Payload.State.HANGUP)
                                .addTag("tag-01")
                                .addTag("tag-02")
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallHangup.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallHangup(callHangup)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).contains(callHangup)
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallHangupRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallHangup(
                CallHangupWebhookEvent.builder()
                    .data(
                        CallHangup.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallHangup.EventType.CALL_HANGUP)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallHangup.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callQualityStats(
                                        CallHangup.Payload.CallQualityStats.builder()
                                            .inbound(
                                                CallHangup.Payload.CallQualityStats.Inbound
                                                    .builder()
                                                    .jitterMaxVariance("2.74")
                                                    .jitterPacketCount("0")
                                                    .mos("4.50")
                                                    .packetCount("591")
                                                    .skipPacketCount("9")
                                                    .build()
                                            )
                                            .outbound(
                                                CallHangup.Payload.CallQualityStats.Outbound
                                                    .builder()
                                                    .packetCount("0")
                                                    .skipPacketCount("0")
                                                    .build()
                                            )
                                            .build()
                                    )
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .addCustomHeader(
                                        CustomSipHeader.builder()
                                            .name("head_1")
                                            .value("val_1")
                                            .build()
                                    )
                                    .addCustomHeader(
                                        CustomSipHeader.builder()
                                            .name("head_2")
                                            .value("val_2")
                                            .build()
                                    )
                                    .from("+35319605860")
                                    .hangupCause(CallHangup.Payload.HangupCause.CALL_REJECTED)
                                    .hangupSource(CallHangup.Payload.HangupSource.CALLER)
                                    .sipHangupCause("603")
                                    .addSipHeader(
                                        SipHeader.builder()
                                            .name(SipHeader.Name.USER_TO_USER)
                                            .value("1234")
                                            .build()
                                    )
                                    .addSipHeader(
                                        SipHeader.builder()
                                            .name(SipHeader.Name.USER_TO_USER)
                                            .value("<sip:111@192.168.1.1>")
                                            .build()
                                    )
                                    .startTime(OffsetDateTime.parse("2018-02-02T22:20:27.521992Z"))
                                    .state(CallHangup.Payload.State.HANGUP)
                                    .addTag("tag-01")
                                    .addTag("tag-02")
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallHangup.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallInitiated() {
        val callInitiated =
            CallInitiatedWebhookEvent.builder()
                .data(
                    CallInitiated.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallInitiated.EventType.CALL_INITIATED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallInitiated.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callScreeningResult("spam_likely")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callerIdName("+35319605860")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionCodecs("G722,PCMU,PCMA")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .addCustomHeader(
                                    CustomSipHeader.builder().name("head_1").value("val_1").build()
                                )
                                .addCustomHeader(
                                    CustomSipHeader.builder().name("head_2").value("val_2").build()
                                )
                                .direction(CallInitiated.Payload.Direction.INCOMING)
                                .from("+35319605860")
                                .offeredCodecs("G722,PCMU,PCMA")
                                .shakenStirAttestation("A")
                                .shakenStirValidated(true)
                                .addSipHeader(
                                    SipHeader.builder()
                                        .name(SipHeader.Name.USER_TO_USER)
                                        .value("1234")
                                        .build()
                                )
                                .addSipHeader(
                                    SipHeader.builder()
                                        .name(SipHeader.Name.USER_TO_USER)
                                        .value("<sip:111@192.168.1.1>")
                                        .build()
                                )
                                .startTime(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                                .state(CallInitiated.Payload.State.PARKED)
                                .addTag("tag-01")
                                .addTag("tag-02")
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallInitiated.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallInitiated(callInitiated)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).contains(callInitiated)
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallInitiatedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallInitiated(
                CallInitiatedWebhookEvent.builder()
                    .data(
                        CallInitiated.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallInitiated.EventType.CALL_INITIATED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallInitiated.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callScreeningResult("spam_likely")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callerIdName("+35319605860")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionCodecs("G722,PCMU,PCMA")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .addCustomHeader(
                                        CustomSipHeader.builder()
                                            .name("head_1")
                                            .value("val_1")
                                            .build()
                                    )
                                    .addCustomHeader(
                                        CustomSipHeader.builder()
                                            .name("head_2")
                                            .value("val_2")
                                            .build()
                                    )
                                    .direction(CallInitiated.Payload.Direction.INCOMING)
                                    .from("+35319605860")
                                    .offeredCodecs("G722,PCMU,PCMA")
                                    .shakenStirAttestation("A")
                                    .shakenStirValidated(true)
                                    .addSipHeader(
                                        SipHeader.builder()
                                            .name(SipHeader.Name.USER_TO_USER)
                                            .value("1234")
                                            .build()
                                    )
                                    .addSipHeader(
                                        SipHeader.builder()
                                            .name(SipHeader.Name.USER_TO_USER)
                                            .value("<sip:111@192.168.1.1>")
                                            .build()
                                    )
                                    .startTime(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                                    .state(CallInitiated.Payload.State.PARKED)
                                    .addTag("tag-01")
                                    .addTag("tag-02")
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallInitiated.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallLeftQueue() {
        val callLeftQueue =
            CallLeftQueueWebhookEvent.builder()
                .data(
                    CallLeftQueue.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallLeftQueue.EventType.CALL_DEQUEUED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallLeftQueue.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .queue("support")
                                .queuePosition(3L)
                                .reason(CallLeftQueue.Payload.Reason.LEAVE)
                                .waitTimeSecs(60L)
                                .build()
                        )
                        .recordType(CallLeftQueue.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallLeftQueue(callLeftQueue)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).contains(callLeftQueue)
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallLeftQueueRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallLeftQueue(
                CallLeftQueueWebhookEvent.builder()
                    .data(
                        CallLeftQueue.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallLeftQueue.EventType.CALL_DEQUEUED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallLeftQueue.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .queue("support")
                                    .queuePosition(3L)
                                    .reason(CallLeftQueue.Payload.Reason.LEAVE)
                                    .waitTimeSecs(60L)
                                    .build()
                            )
                            .recordType(CallLeftQueue.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallMachineDetectionEnded() {
        val callMachineDetectionEnded =
            CallMachineDetectionEndedWebhookEvent.builder()
                .data(
                    CallMachineDetectionEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallMachineDetectionEnded.EventType.CALL_MACHINE_DETECTION_ENDED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallMachineDetectionEnded.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .from("+35319605860")
                                .result(CallMachineDetectionEnded.Payload.Result.HUMAN)
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallMachineDetectionEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallMachineDetectionEnded(callMachineDetectionEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded())
            .contains(callMachineDetectionEnded)
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallMachineDetectionEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallMachineDetectionEnded(
                CallMachineDetectionEndedWebhookEvent.builder()
                    .data(
                        CallMachineDetectionEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                CallMachineDetectionEnded.EventType.CALL_MACHINE_DETECTION_ENDED
                            )
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallMachineDetectionEnded.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .from("+35319605860")
                                    .result(CallMachineDetectionEnded.Payload.Result.HUMAN)
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallMachineDetectionEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallMachineGreetingEnded() {
        val callMachineGreetingEnded =
            CallMachineGreetingEndedWebhookEvent.builder()
                .data(
                    CallMachineGreetingEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallMachineGreetingEnded.EventType.CALL_MACHINE_GREETING_ENDED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallMachineGreetingEnded.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .from("+35319605860")
                                .result(CallMachineGreetingEnded.Payload.Result.ENDED)
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallMachineGreetingEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallMachineGreetingEnded(callMachineGreetingEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).contains(callMachineGreetingEnded)
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallMachineGreetingEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallMachineGreetingEnded(
                CallMachineGreetingEndedWebhookEvent.builder()
                    .data(
                        CallMachineGreetingEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                CallMachineGreetingEnded.EventType.CALL_MACHINE_GREETING_ENDED
                            )
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallMachineGreetingEnded.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .from("+35319605860")
                                    .result(CallMachineGreetingEnded.Payload.Result.ENDED)
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallMachineGreetingEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallMachinePremiumDetectionEnded() {
        val callMachinePremiumDetectionEnded =
            CallMachinePremiumDetectionEndedWebhookEvent.builder()
                .data(
                    CallMachinePremiumDetectionEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(
                            CallMachinePremiumDetectionEnded.EventType
                                .CALL_MACHINE_PREMIUM_DETECTION_ENDED
                        )
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallMachinePremiumDetectionEnded.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .from("+35319605860")
                                .result(CallMachinePremiumDetectionEnded.Payload.Result.MACHINE)
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallMachinePremiumDetectionEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallMachinePremiumDetectionEnded(callMachinePremiumDetectionEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded())
            .contains(callMachinePremiumDetectionEnded)
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallMachinePremiumDetectionEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallMachinePremiumDetectionEnded(
                CallMachinePremiumDetectionEndedWebhookEvent.builder()
                    .data(
                        CallMachinePremiumDetectionEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                CallMachinePremiumDetectionEnded.EventType
                                    .CALL_MACHINE_PREMIUM_DETECTION_ENDED
                            )
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallMachinePremiumDetectionEnded.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .from("+35319605860")
                                    .result(CallMachinePremiumDetectionEnded.Payload.Result.MACHINE)
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallMachinePremiumDetectionEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallMachinePremiumGreetingEnded() {
        val callMachinePremiumGreetingEnded =
            CallMachinePremiumGreetingEndedWebhookEvent.builder()
                .data(
                    CallMachinePremiumGreetingEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(
                            CallMachinePremiumGreetingEnded.EventType
                                .CALL_MACHINE_PREMIUM_GREETING_ENDED
                        )
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallMachinePremiumGreetingEnded.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .from("+35319605860")
                                .result(
                                    CallMachinePremiumGreetingEnded.Payload.Result.BEEP_DETECTED
                                )
                                .to("+35319605860")
                                .build()
                        )
                        .recordType(CallMachinePremiumGreetingEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallMachinePremiumGreetingEnded(callMachinePremiumGreetingEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded())
            .contains(callMachinePremiumGreetingEnded)
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallMachinePremiumGreetingEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallMachinePremiumGreetingEnded(
                CallMachinePremiumGreetingEndedWebhookEvent.builder()
                    .data(
                        CallMachinePremiumGreetingEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                CallMachinePremiumGreetingEnded.EventType
                                    .CALL_MACHINE_PREMIUM_GREETING_ENDED
                            )
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallMachinePremiumGreetingEnded.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .from("+35319605860")
                                    .result(
                                        CallMachinePremiumGreetingEnded.Payload.Result.BEEP_DETECTED
                                    )
                                    .to("+35319605860")
                                    .build()
                            )
                            .recordType(CallMachinePremiumGreetingEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallPlaybackEnded() {
        val callPlaybackEnded =
            CallPlaybackEndedWebhookEvent.builder()
                .data(
                    CallPlaybackEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallPlaybackEnded.EventType.CALL_PLAYBACK_ENDED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallPlaybackEnded.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .mediaName("my_media_uploaded_to_media_storage_api")
                                .mediaUrl("http://example.com/audio.wav")
                                .overlay(false)
                                .status(CallPlaybackEnded.Payload.Status.COMPLETED)
                                .statusDetail(
                                    "Received curl error 22 HTTP error code 404 trying to fetch http://mediaurl.com."
                                )
                                .build()
                        )
                        .recordType(CallPlaybackEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallPlaybackEnded(callPlaybackEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).contains(callPlaybackEnded)
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallPlaybackEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallPlaybackEnded(
                CallPlaybackEndedWebhookEvent.builder()
                    .data(
                        CallPlaybackEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallPlaybackEnded.EventType.CALL_PLAYBACK_ENDED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallPlaybackEnded.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .mediaName("my_media_uploaded_to_media_storage_api")
                                    .mediaUrl("http://example.com/audio.wav")
                                    .overlay(false)
                                    .status(CallPlaybackEnded.Payload.Status.COMPLETED)
                                    .statusDetail(
                                        "Received curl error 22 HTTP error code 404 trying to fetch http://mediaurl.com."
                                    )
                                    .build()
                            )
                            .recordType(CallPlaybackEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallPlaybackStarted() {
        val callPlaybackStarted =
            CallPlaybackStartedWebhookEvent.builder()
                .data(
                    CallPlaybackStarted.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallPlaybackStarted.EventType.CALL_PLAYBACK_STARTED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallPlaybackStarted.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .mediaName("my_media_uploaded_to_media_storage_api")
                                .mediaUrl("http://example.com/audio.wav")
                                .overlay(false)
                                .build()
                        )
                        .recordType(CallPlaybackStarted.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallPlaybackStarted(callPlaybackStarted)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).contains(callPlaybackStarted)
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallPlaybackStartedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallPlaybackStarted(
                CallPlaybackStartedWebhookEvent.builder()
                    .data(
                        CallPlaybackStarted.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallPlaybackStarted.EventType.CALL_PLAYBACK_STARTED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallPlaybackStarted.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .mediaName("my_media_uploaded_to_media_storage_api")
                                    .mediaUrl("http://example.com/audio.wav")
                                    .overlay(false)
                                    .build()
                            )
                            .recordType(CallPlaybackStarted.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallRecordingError() {
        val callRecordingError =
            CallRecordingErrorWebhookEvent.builder()
                .data(
                    CallRecordingError.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallRecordingError.EventType.CALL_RECORDING_ERROR)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallRecordingError.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .reason(CallRecordingError.Payload.Reason.INTERNAL_SERVER_ERROR)
                                .build()
                        )
                        .recordType(CallRecordingError.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallRecordingError(callRecordingError)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).contains(callRecordingError)
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallRecordingErrorRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallRecordingError(
                CallRecordingErrorWebhookEvent.builder()
                    .data(
                        CallRecordingError.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallRecordingError.EventType.CALL_RECORDING_ERROR)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallRecordingError.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .reason(CallRecordingError.Payload.Reason.INTERNAL_SERVER_ERROR)
                                    .build()
                            )
                            .recordType(CallRecordingError.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallRecordingSaved() {
        val callRecordingSaved =
            CallRecordingSavedWebhookEvent.builder()
                .data(
                    CallRecordingSaved.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallRecordingSaved.EventType.CALL_RECORDING_SAVED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallRecordingSaved.Payload.builder()
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .channels(CallRecordingSaved.Payload.Channels.SINGLE)
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .publicRecordingUrls(
                                    CallRecordingSaved.Payload.PublicRecordingUrls.builder()
                                        .mp3("http://example.com/recording.mp3")
                                        .wav("http://example.com/recording.wav")
                                        .build()
                                )
                                .recordingEndedAt(
                                    OffsetDateTime.parse("2018-02-02T22:20:27.521992Z")
                                )
                                .recordingStartedAt(
                                    OffsetDateTime.parse("2018-02-02T22:20:27.521992Z")
                                )
                                .recordingUrls(
                                    CallRecordingSaved.Payload.RecordingUrls.builder()
                                        .mp3("http://example.com/recording.mp3")
                                        .wav("http://example.com/recording.wav")
                                        .build()
                                )
                                .build()
                        )
                        .recordType(CallRecordingSaved.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallRecordingSaved(callRecordingSaved)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).contains(callRecordingSaved)
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallRecordingSavedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallRecordingSaved(
                CallRecordingSavedWebhookEvent.builder()
                    .data(
                        CallRecordingSaved.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallRecordingSaved.EventType.CALL_RECORDING_SAVED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallRecordingSaved.Payload.builder()
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .channels(CallRecordingSaved.Payload.Channels.SINGLE)
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .publicRecordingUrls(
                                        CallRecordingSaved.Payload.PublicRecordingUrls.builder()
                                            .mp3("http://example.com/recording.mp3")
                                            .wav("http://example.com/recording.wav")
                                            .build()
                                    )
                                    .recordingEndedAt(
                                        OffsetDateTime.parse("2018-02-02T22:20:27.521992Z")
                                    )
                                    .recordingStartedAt(
                                        OffsetDateTime.parse("2018-02-02T22:20:27.521992Z")
                                    )
                                    .recordingUrls(
                                        CallRecordingSaved.Payload.RecordingUrls.builder()
                                            .mp3("http://example.com/recording.mp3")
                                            .wav("http://example.com/recording.wav")
                                            .build()
                                    )
                                    .build()
                            )
                            .recordType(CallRecordingSaved.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallRecordingTranscriptionSaved() {
        val callRecordingTranscriptionSaved =
            CallRecordingTranscriptionSavedWebhookEvent.builder()
                .data(
                    CallRecordingTranscriptionSaved.builder()
                        .id("898e96ef-be63-45aa-9e7d-01332bff9a97")
                        .eventType(
                            CallRecordingTranscriptionSaved.EventType
                                .CALL_RECORDING_TRANSCRIPTION_SAVED
                        )
                        .occurredAt(OffsetDateTime.parse("2025-02-19T17:02:49.371454Z"))
                        .payload(
                            CallRecordingTranscriptionSaved.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callingPartyType(
                                    CallRecordingTranscriptionSaved.Payload.CallingPartyType.PSTN
                                )
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .recordingId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .recordingTranscriptionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .status(CallRecordingTranscriptionSaved.Payload.Status.COMPLETED)
                                .transcriptionText("Hi!")
                                .build()
                        )
                        .recordType(CallRecordingTranscriptionSaved.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallRecordingTranscriptionSaved(callRecordingTranscriptionSaved)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved())
            .contains(callRecordingTranscriptionSaved)
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallRecordingTranscriptionSavedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallRecordingTranscriptionSaved(
                CallRecordingTranscriptionSavedWebhookEvent.builder()
                    .data(
                        CallRecordingTranscriptionSaved.builder()
                            .id("898e96ef-be63-45aa-9e7d-01332bff9a97")
                            .eventType(
                                CallRecordingTranscriptionSaved.EventType
                                    .CALL_RECORDING_TRANSCRIPTION_SAVED
                            )
                            .occurredAt(OffsetDateTime.parse("2025-02-19T17:02:49.371454Z"))
                            .payload(
                                CallRecordingTranscriptionSaved.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callingPartyType(
                                        CallRecordingTranscriptionSaved.Payload.CallingPartyType
                                            .PSTN
                                    )
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .recordingId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .recordingTranscriptionId(
                                        "428c31b6-7af4-4bcb-b7f5-5013ef9657c1"
                                    )
                                    .status(
                                        CallRecordingTranscriptionSaved.Payload.Status.COMPLETED
                                    )
                                    .transcriptionText("Hi!")
                                    .build()
                            )
                            .recordType(CallRecordingTranscriptionSaved.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallReferCompleted() {
        val callReferCompleted =
            CallReferCompletedWebhookEvent.builder()
                .data(
                    CallReferCompleted.builder()
                        .id("4ce4366d-8d87-44be-a00b-942154e9c5f5")
                        .eventType(CallReferCompleted.EventType.CALL_REFER_COMPLETED)
                        .occurredAt(OffsetDateTime.parse("2020-03-30T13:29:44.650000Z"))
                        .payload(
                            CallReferCompleted.Payload.builder()
                                .callControlId(
                                    "v2:OycMASgvIjsGIAVEx8x3n9rYeKnUJx6a3V8VGhs5futnr17KZhujZA"
                                )
                                .callLegId("817f7de8-728a-11ea-9ce6-02420a0f8969")
                                .callSessionId("817f8c2a-728a-11ea-9cbe-02420a0f8969")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("1289082222292239760")
                                .from("+35319605860")
                                .sipNotifyResponse(200L)
                                .to("+13129457420")
                                .build()
                        )
                        .recordType(CallReferCompleted.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallReferCompleted(callReferCompleted)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).contains(callReferCompleted)
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallReferCompletedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallReferCompleted(
                CallReferCompletedWebhookEvent.builder()
                    .data(
                        CallReferCompleted.builder()
                            .id("4ce4366d-8d87-44be-a00b-942154e9c5f5")
                            .eventType(CallReferCompleted.EventType.CALL_REFER_COMPLETED)
                            .occurredAt(OffsetDateTime.parse("2020-03-30T13:29:44.650000Z"))
                            .payload(
                                CallReferCompleted.Payload.builder()
                                    .callControlId(
                                        "v2:OycMASgvIjsGIAVEx8x3n9rYeKnUJx6a3V8VGhs5futnr17KZhujZA"
                                    )
                                    .callLegId("817f7de8-728a-11ea-9ce6-02420a0f8969")
                                    .callSessionId("817f8c2a-728a-11ea-9cbe-02420a0f8969")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("1289082222292239760")
                                    .from("+35319605860")
                                    .sipNotifyResponse(200L)
                                    .to("+13129457420")
                                    .build()
                            )
                            .recordType(CallReferCompleted.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallReferFailed() {
        val callReferFailed =
            CallReferFailedWebhookEvent.builder()
                .data(
                    CallReferFailed.builder()
                        .id("fbeb70e0-54eb-4e26-8d19-56b43e66f754")
                        .eventType(CallReferFailed.EventType.CALL_REFER_FAILED)
                        .occurredAt(OffsetDateTime.parse("2020-03-30T13:29:42.130013Z"))
                        .payload(
                            CallReferFailed.Payload.builder()
                                .callControlId(
                                    "v2:OycMASgvIjsGIAVEx8x3n9rYeKnUJx6a3V8VGhs5futnr17KZhujZA"
                                )
                                .callLegId("817f7de8-728a-11ea-9ce6-02420a0f8969")
                                .callSessionId("817f8c2a-728a-11ea-9cbe-02420a0f8969")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("1289082222292239760")
                                .from("+35319605860")
                                .sipNotifyResponse(603L)
                                .to("+13129457420")
                                .build()
                        )
                        .recordType(CallReferFailed.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallReferFailed(callReferFailed)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).contains(callReferFailed)
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallReferFailedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallReferFailed(
                CallReferFailedWebhookEvent.builder()
                    .data(
                        CallReferFailed.builder()
                            .id("fbeb70e0-54eb-4e26-8d19-56b43e66f754")
                            .eventType(CallReferFailed.EventType.CALL_REFER_FAILED)
                            .occurredAt(OffsetDateTime.parse("2020-03-30T13:29:42.130013Z"))
                            .payload(
                                CallReferFailed.Payload.builder()
                                    .callControlId(
                                        "v2:OycMASgvIjsGIAVEx8x3n9rYeKnUJx6a3V8VGhs5futnr17KZhujZA"
                                    )
                                    .callLegId("817f7de8-728a-11ea-9ce6-02420a0f8969")
                                    .callSessionId("817f8c2a-728a-11ea-9cbe-02420a0f8969")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("1289082222292239760")
                                    .from("+35319605860")
                                    .sipNotifyResponse(603L)
                                    .to("+13129457420")
                                    .build()
                            )
                            .recordType(CallReferFailed.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallReferStarted() {
        val callReferStarted =
            CallReferStartedWebhookEvent.builder()
                .data(
                    CallReferStarted.builder()
                        .id("fbeb70e0-54eb-4e26-8d19-56b43e66f754")
                        .eventType(CallReferStarted.EventType.CALL_REFER_STARTED)
                        .occurredAt(OffsetDateTime.parse("2020-03-30T13:29:42.130013Z"))
                        .payload(
                            CallReferStarted.Payload.builder()
                                .callControlId(
                                    "v2:OycMASgvIjsGIAVEx8x3n9rYeKnUJx6a3V8VGhs5futnr17KZhujZA"
                                )
                                .callLegId("817f7de8-728a-11ea-9ce6-02420a0f8969")
                                .callSessionId("817f8c2a-728a-11ea-9cbe-02420a0f8969")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("1289082222292239760")
                                .from("+35319605860")
                                .sipNotifyResponse(100L)
                                .to("+13129457420")
                                .build()
                        )
                        .recordType(CallReferStarted.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallReferStarted(callReferStarted)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).contains(callReferStarted)
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallReferStartedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallReferStarted(
                CallReferStartedWebhookEvent.builder()
                    .data(
                        CallReferStarted.builder()
                            .id("fbeb70e0-54eb-4e26-8d19-56b43e66f754")
                            .eventType(CallReferStarted.EventType.CALL_REFER_STARTED)
                            .occurredAt(OffsetDateTime.parse("2020-03-30T13:29:42.130013Z"))
                            .payload(
                                CallReferStarted.Payload.builder()
                                    .callControlId(
                                        "v2:OycMASgvIjsGIAVEx8x3n9rYeKnUJx6a3V8VGhs5futnr17KZhujZA"
                                    )
                                    .callLegId("817f7de8-728a-11ea-9ce6-02420a0f8969")
                                    .callSessionId("817f8c2a-728a-11ea-9cbe-02420a0f8969")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("1289082222292239760")
                                    .from("+35319605860")
                                    .sipNotifyResponse(100L)
                                    .to("+13129457420")
                                    .build()
                            )
                            .recordType(CallReferStarted.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallSiprecFailed() {
        val callSiprecFailed =
            CallSiprecFailedWebhookEvent.builder()
                .data(
                    CallSiprecFailed.builder()
                        .id("25dc3731-e51e-4927-a50d-a61cc25984b1")
                        .eventType(CallSiprecFailed.EventType.SIPREC_FAILED)
                        .occurredAt(OffsetDateTime.parse("2021-12-15T14:11:24.613295Z"))
                        .payload(
                            CallSiprecFailed.Payload.builder()
                                .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .failureCause("no_answer")
                                .build()
                        )
                        .recordType(CallSiprecFailed.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallSiprecFailed(callSiprecFailed)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).contains(callSiprecFailed)
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallSiprecFailedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallSiprecFailed(
                CallSiprecFailedWebhookEvent.builder()
                    .data(
                        CallSiprecFailed.builder()
                            .id("25dc3731-e51e-4927-a50d-a61cc25984b1")
                            .eventType(CallSiprecFailed.EventType.SIPREC_FAILED)
                            .occurredAt(OffsetDateTime.parse("2021-12-15T14:11:24.613295Z"))
                            .payload(
                                CallSiprecFailed.Payload.builder()
                                    .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .failureCause("no_answer")
                                    .build()
                            )
                            .recordType(CallSiprecFailed.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallSiprecStarted() {
        val callSiprecStarted =
            CallSiprecStartedWebhookEvent.builder()
                .data(
                    CallSiprecStarted.builder()
                        .id("7d743d69-f7e8-4761-b7d4-8cacf9d3c031")
                        .eventType(CallSiprecStarted.EventType.SIPREC_STARTED)
                        .occurredAt(OffsetDateTime.parse("2021-12-15T14:06:32.059436Z"))
                        .payload(
                            CallSiprecStarted.Payload.builder()
                                .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .build()
                        )
                        .recordType(CallSiprecStarted.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallSiprecStarted(callSiprecStarted)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).contains(callSiprecStarted)
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallSiprecStartedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallSiprecStarted(
                CallSiprecStartedWebhookEvent.builder()
                    .data(
                        CallSiprecStarted.builder()
                            .id("7d743d69-f7e8-4761-b7d4-8cacf9d3c031")
                            .eventType(CallSiprecStarted.EventType.SIPREC_STARTED)
                            .occurredAt(OffsetDateTime.parse("2021-12-15T14:06:32.059436Z"))
                            .payload(
                                CallSiprecStarted.Payload.builder()
                                    .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .build()
                            )
                            .recordType(CallSiprecStarted.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallSiprecStopped() {
        val callSiprecStopped =
            CallSiprecStoppedWebhookEvent.builder()
                .data(
                    CallSiprecStopped.builder()
                        .id("25dc3731-e51e-4927-a50d-a61cc25984b1")
                        .eventType(CallSiprecStopped.EventType.SIPREC_STOPPED)
                        .occurredAt(OffsetDateTime.parse("2021-12-15T14:11:24.613295Z"))
                        .payload(
                            CallSiprecStopped.Payload.builder()
                                .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .hangupCause("normal_clearing")
                                .build()
                        )
                        .recordType(CallSiprecStopped.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallSiprecStopped(callSiprecStopped)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).contains(callSiprecStopped)
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallSiprecStoppedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallSiprecStopped(
                CallSiprecStoppedWebhookEvent.builder()
                    .data(
                        CallSiprecStopped.builder()
                            .id("25dc3731-e51e-4927-a50d-a61cc25984b1")
                            .eventType(CallSiprecStopped.EventType.SIPREC_STOPPED)
                            .occurredAt(OffsetDateTime.parse("2021-12-15T14:11:24.613295Z"))
                            .payload(
                                CallSiprecStopped.Payload.builder()
                                    .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .hangupCause("normal_clearing")
                                    .build()
                            )
                            .recordType(CallSiprecStopped.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallSpeakEnded() {
        val callSpeakEnded =
            CallSpeakEndedWebhookEvent.builder()
                .data(
                    CallSpeakEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallSpeakEnded.EventType.CALL_SPEAK_ENDED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallSpeakEnded.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .status(CallSpeakEnded.Payload.Status.COMPLETED)
                                .build()
                        )
                        .recordType(CallSpeakEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallSpeakEnded(callSpeakEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).contains(callSpeakEnded)
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallSpeakEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallSpeakEnded(
                CallSpeakEndedWebhookEvent.builder()
                    .data(
                        CallSpeakEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallSpeakEnded.EventType.CALL_SPEAK_ENDED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallSpeakEnded.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .status(CallSpeakEnded.Payload.Status.COMPLETED)
                                    .build()
                            )
                            .recordType(CallSpeakEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallSpeakStarted() {
        val callSpeakStarted =
            CallSpeakStartedWebhookEvent.builder()
                .data(
                    CallSpeakStarted.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(CallSpeakStarted.EventType.CALL_SPEAK_STARTED)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            CallSpeakStarted.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .build()
                        )
                        .recordType(CallSpeakStarted.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallSpeakStarted(callSpeakStarted)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).contains(callSpeakStarted)
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallSpeakStartedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallSpeakStarted(
                CallSpeakStartedWebhookEvent.builder()
                    .data(
                        CallSpeakStarted.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(CallSpeakStarted.EventType.CALL_SPEAK_STARTED)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                CallSpeakStarted.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .build()
                            )
                            .recordType(CallSpeakStarted.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallStreamingFailed() {
        val callStreamingFailed =
            CallStreamingFailedWebhookEvent.builder()
                .data(
                    CallStreamingFailed.builder()
                        .id("25dc3731-e51e-4927-a50d-a61cc25984b1")
                        .eventType(CallStreamingFailed.EventType.STREAMING_FAILED)
                        .occurredAt(OffsetDateTime.parse("2021-12-15T14:11:24.613295Z"))
                        .payload(
                            CallStreamingFailed.Payload.builder()
                                .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .failureReason("connection_failed")
                                .streamId("1edb94f9-7ef0-4150-b502-e0ebadfd9491")
                                .streamParams(
                                    CallStreamingFailed.Payload.StreamParams.builder()
                                        .streamUrl("wss://www.example.com/websocket")
                                        .track(
                                            CallStreamingFailed.Payload.StreamParams.Track
                                                .INBOUND_TRACK
                                        )
                                        .build()
                                )
                                .streamType(CallStreamingFailed.Payload.StreamType.WEBSOCKET)
                                .build()
                        )
                        .recordType(CallStreamingFailed.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallStreamingFailed(callStreamingFailed)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).contains(callStreamingFailed)
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallStreamingFailedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallStreamingFailed(
                CallStreamingFailedWebhookEvent.builder()
                    .data(
                        CallStreamingFailed.builder()
                            .id("25dc3731-e51e-4927-a50d-a61cc25984b1")
                            .eventType(CallStreamingFailed.EventType.STREAMING_FAILED)
                            .occurredAt(OffsetDateTime.parse("2021-12-15T14:11:24.613295Z"))
                            .payload(
                                CallStreamingFailed.Payload.builder()
                                    .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .failureReason("connection_failed")
                                    .streamId("1edb94f9-7ef0-4150-b502-e0ebadfd9491")
                                    .streamParams(
                                        CallStreamingFailed.Payload.StreamParams.builder()
                                            .streamUrl("wss://www.example.com/websocket")
                                            .track(
                                                CallStreamingFailed.Payload.StreamParams.Track
                                                    .INBOUND_TRACK
                                            )
                                            .build()
                                    )
                                    .streamType(CallStreamingFailed.Payload.StreamType.WEBSOCKET)
                                    .build()
                            )
                            .recordType(CallStreamingFailed.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallStreamingStarted() {
        val callStreamingStarted =
            CallStreamingStartedWebhookEvent.builder()
                .data(
                    CallStreamingStarted.builder()
                        .id("7d743d69-f7e8-4761-b7d4-8cacf9d3c031")
                        .eventType(CallStreamingStarted.EventType.STREAMING_STARTED)
                        .occurredAt(OffsetDateTime.parse("2021-12-15T14:06:32.059436Z"))
                        .payload(
                            CallStreamingStarted.Payload.builder()
                                .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .streamUrl("wss://www.example.com/websocket")
                                .build()
                        )
                        .recordType(CallStreamingStarted.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallStreamingStarted(callStreamingStarted)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).contains(callStreamingStarted)
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallStreamingStartedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallStreamingStarted(
                CallStreamingStartedWebhookEvent.builder()
                    .data(
                        CallStreamingStarted.builder()
                            .id("7d743d69-f7e8-4761-b7d4-8cacf9d3c031")
                            .eventType(CallStreamingStarted.EventType.STREAMING_STARTED)
                            .occurredAt(OffsetDateTime.parse("2021-12-15T14:06:32.059436Z"))
                            .payload(
                                CallStreamingStarted.Payload.builder()
                                    .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .streamUrl("wss://www.example.com/websocket")
                                    .build()
                            )
                            .recordType(CallStreamingStarted.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCallStreamingStopped() {
        val callStreamingStopped =
            CallStreamingStoppedWebhookEvent.builder()
                .data(
                    CallStreamingStopped.builder()
                        .id("25dc3731-e51e-4927-a50d-a61cc25984b1")
                        .eventType(CallStreamingStopped.EventType.STREAMING_STOPPED)
                        .occurredAt(OffsetDateTime.parse("2021-12-15T14:11:24.613295Z"))
                        .payload(
                            CallStreamingStopped.Payload.builder()
                                .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .streamUrl("wss://www.example.com/websocket")
                                .build()
                        )
                        .recordType(CallStreamingStopped.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCallStreamingStopped(callStreamingStopped)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).contains(callStreamingStopped)
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCallStreamingStoppedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCallStreamingStopped(
                CallStreamingStoppedWebhookEvent.builder()
                    .data(
                        CallStreamingStopped.builder()
                            .id("25dc3731-e51e-4927-a50d-a61cc25984b1")
                            .eventType(CallStreamingStopped.EventType.STREAMING_STOPPED)
                            .occurredAt(OffsetDateTime.parse("2021-12-15T14:11:24.613295Z"))
                            .payload(
                                CallStreamingStopped.Payload.builder()
                                    .callControlId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callLegId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .callSessionId("31f19208-5db0-11ec-9ea7-02420a0d3a69")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .streamUrl("wss://www.example.com/websocket")
                                    .build()
                            )
                            .recordType(CallStreamingStopped.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofCampaignStatusUpdate() {
        val campaignStatusUpdate =
            CampaignStatusUpdate.builder()
                .brandId("d88dd2aa-1bb9-4ef0-9ec8-1752b80316a5")
                .campaignId("4b300178-131c-d902-d54e-72d90ba1620j")
                .createDate("createDate")
                .cspId("cspId")
                .description("Campaign has been marked as dormant")
                .isTMobileRegistered(true)
                .status(CampaignStatusUpdate.Status.DORMANT)
                .type(CampaignStatusUpdate.Type.TELNYX_EVENT)
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofCampaignStatusUpdate(campaignStatusUpdate)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).contains(campaignStatusUpdate)
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofCampaignStatusUpdateRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofCampaignStatusUpdate(
                CampaignStatusUpdate.builder()
                    .brandId("d88dd2aa-1bb9-4ef0-9ec8-1752b80316a5")
                    .campaignId("4b300178-131c-d902-d54e-72d90ba1620j")
                    .createDate("createDate")
                    .cspId("cspId")
                    .description("Campaign has been marked as dormant")
                    .isTMobileRegistered(true)
                    .status(CampaignStatusUpdate.Status.DORMANT)
                    .type(CampaignStatusUpdate.Type.TELNYX_EVENT)
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceCreated() {
        val conferenceCreated =
            ConferenceCreatedWebhookEvent.builder()
                .data(
                    ConferenceCreated.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(ConferenceCreated.EventType.CONFERENCE_CREATED)
                        .payload(
                            ConferenceCreated.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                .build()
                        )
                        .recordType(ConferenceCreated.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofConferenceCreated(conferenceCreated)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).contains(conferenceCreated)
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceCreatedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceCreated(
                ConferenceCreatedWebhookEvent.builder()
                    .data(
                        ConferenceCreated.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(ConferenceCreated.EventType.CONFERENCE_CREATED)
                            .payload(
                                ConferenceCreated.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                    .build()
                            )
                            .recordType(ConferenceCreated.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceEnded() {
        val conferenceEnded =
            ConferenceEndedWebhookEvent.builder()
                .data(
                    ConferenceEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(ConferenceEnded.EventType.CONFERENCE_ENDED)
                        .payload(
                            ConferenceEnded.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                .reason(ConferenceEnded.Payload.Reason.HOST_LEFT)
                                .build()
                        )
                        .recordType(ConferenceEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofConferenceEnded(conferenceEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).contains(conferenceEnded)
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceEnded(
                ConferenceEndedWebhookEvent.builder()
                    .data(
                        ConferenceEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(ConferenceEnded.EventType.CONFERENCE_ENDED)
                            .payload(
                                ConferenceEnded.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                    .reason(ConferenceEnded.Payload.Reason.HOST_LEFT)
                                    .build()
                            )
                            .recordType(ConferenceEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceFloorChanged() {
        val conferenceFloorChanged =
            ConferenceFloorChanged.builder()
                .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                .eventType(ConferenceFloorChanged.EventType.CONFERENCE_FLOOR_CHANGED)
                .payload(
                    ConferenceFloorChanged.Payload.builder()
                        .callControlId("v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg")
                        .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                        .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                        .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                        .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                        .connectionId("7267xxxxxxxxxxxxxx")
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                        .build()
                )
                .recordType(ConferenceFloorChanged.RecordType.EVENT)
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofConferenceFloorChanged(conferenceFloorChanged)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).contains(conferenceFloorChanged)
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceFloorChangedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceFloorChanged(
                ConferenceFloorChanged.builder()
                    .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                    .eventType(ConferenceFloorChanged.EventType.CONFERENCE_FLOOR_CHANGED)
                    .payload(
                        ConferenceFloorChanged.Payload.builder()
                            .callControlId(
                                "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                            )
                            .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                            .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                            .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                            .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                            .connectionId("7267xxxxxxxxxxxxxx")
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                            .build()
                    )
                    .recordType(ConferenceFloorChanged.RecordType.EVENT)
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceParticipantJoined() {
        val conferenceParticipantJoined =
            ConferenceParticipantJoinedWebhookEvent.builder()
                .data(
                    ConferenceParticipantJoined.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(
                            ConferenceParticipantJoined.EventType.CONFERENCE_PARTICIPANT_JOINED
                        )
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            ConferenceParticipantJoined.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .build()
                        )
                        .recordType(ConferenceParticipantJoined.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantJoined(conferenceParticipantJoined)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined())
            .contains(conferenceParticipantJoined)
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceParticipantJoinedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantJoined(
                ConferenceParticipantJoinedWebhookEvent.builder()
                    .data(
                        ConferenceParticipantJoined.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                ConferenceParticipantJoined.EventType.CONFERENCE_PARTICIPANT_JOINED
                            )
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                ConferenceParticipantJoined.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .build()
                            )
                            .recordType(ConferenceParticipantJoined.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceParticipantLeft() {
        val conferenceParticipantLeft =
            ConferenceParticipantLeftWebhookEvent.builder()
                .data(
                    ConferenceParticipantLeft.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(ConferenceParticipantLeft.EventType.CONFERENCE_PARTICIPANT_LEFT)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            ConferenceParticipantLeft.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .build()
                        )
                        .recordType(ConferenceParticipantLeft.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantLeft(conferenceParticipantLeft)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft())
            .contains(conferenceParticipantLeft)
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceParticipantLeftRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantLeft(
                ConferenceParticipantLeftWebhookEvent.builder()
                    .data(
                        ConferenceParticipantLeft.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                ConferenceParticipantLeft.EventType.CONFERENCE_PARTICIPANT_LEFT
                            )
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                ConferenceParticipantLeft.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .build()
                            )
                            .recordType(ConferenceParticipantLeft.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceParticipantPlaybackEnded() {
        val conferenceParticipantPlaybackEnded =
            ConferenceParticipantPlaybackEndedWebhookEvent.builder()
                .data(
                    ConferenceParticipantPlaybackEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(
                            ConferenceParticipantPlaybackEnded.EventType
                                .CONFERENCE_PARTICIPANT_PLAYBACK_ENDED
                        )
                        .payload(
                            ConferenceParticipantPlaybackEnded.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .mediaName("my_media_uploaded_to_media_storage_api")
                                .mediaUrl("https://www.example.com/audio.mp3")
                                .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                .build()
                        )
                        .recordType(ConferenceParticipantPlaybackEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantPlaybackEnded(
                conferenceParticipantPlaybackEnded
            )

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded())
            .contains(conferenceParticipantPlaybackEnded)
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceParticipantPlaybackEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantPlaybackEnded(
                ConferenceParticipantPlaybackEndedWebhookEvent.builder()
                    .data(
                        ConferenceParticipantPlaybackEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                ConferenceParticipantPlaybackEnded.EventType
                                    .CONFERENCE_PARTICIPANT_PLAYBACK_ENDED
                            )
                            .payload(
                                ConferenceParticipantPlaybackEnded.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .mediaName("my_media_uploaded_to_media_storage_api")
                                    .mediaUrl("https://www.example.com/audio.mp3")
                                    .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                    .build()
                            )
                            .recordType(ConferenceParticipantPlaybackEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceParticipantPlaybackStarted() {
        val conferenceParticipantPlaybackStarted =
            ConferenceParticipantPlaybackStartedWebhookEvent.builder()
                .data(
                    ConferenceParticipantPlaybackStarted.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(
                            ConferenceParticipantPlaybackStarted.EventType
                                .CONFERENCE_PARTICIPANT_PLAYBACK_STARTED
                        )
                        .payload(
                            ConferenceParticipantPlaybackStarted.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .mediaName("my_media_uploaded_to_media_storage_api")
                                .mediaUrl("https://www.example.com/audio.mp3")
                                .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                .build()
                        )
                        .recordType(ConferenceParticipantPlaybackStarted.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantPlaybackStarted(
                conferenceParticipantPlaybackStarted
            )

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted())
            .contains(conferenceParticipantPlaybackStarted)
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceParticipantPlaybackStartedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantPlaybackStarted(
                ConferenceParticipantPlaybackStartedWebhookEvent.builder()
                    .data(
                        ConferenceParticipantPlaybackStarted.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                ConferenceParticipantPlaybackStarted.EventType
                                    .CONFERENCE_PARTICIPANT_PLAYBACK_STARTED
                            )
                            .payload(
                                ConferenceParticipantPlaybackStarted.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .mediaName("my_media_uploaded_to_media_storage_api")
                                    .mediaUrl("https://www.example.com/audio.mp3")
                                    .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                    .build()
                            )
                            .recordType(ConferenceParticipantPlaybackStarted.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceParticipantSpeakEnded() {
        val conferenceParticipantSpeakEnded =
            ConferenceParticipantSpeakEndedWebhookEvent.builder()
                .data(
                    ConferenceParticipantSpeakEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(
                            ConferenceParticipantSpeakEnded.EventType
                                .CONFERENCE_PARTICIPANT_SPEAK_ENDED
                        )
                        .payload(
                            ConferenceParticipantSpeakEnded.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                .build()
                        )
                        .recordType(ConferenceParticipantSpeakEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantSpeakEnded(conferenceParticipantSpeakEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded())
            .contains(conferenceParticipantSpeakEnded)
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceParticipantSpeakEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantSpeakEnded(
                ConferenceParticipantSpeakEndedWebhookEvent.builder()
                    .data(
                        ConferenceParticipantSpeakEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                ConferenceParticipantSpeakEnded.EventType
                                    .CONFERENCE_PARTICIPANT_SPEAK_ENDED
                            )
                            .payload(
                                ConferenceParticipantSpeakEnded.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                    .build()
                            )
                            .recordType(ConferenceParticipantSpeakEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceParticipantSpeakStarted() {
        val conferenceParticipantSpeakStarted =
            ConferenceParticipantSpeakStartedWebhookEvent.builder()
                .data(
                    ConferenceParticipantSpeakStarted.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(
                            ConferenceParticipantSpeakStarted.EventType
                                .CONFERENCE_PARTICIPANT_SPEAK_STARTED
                        )
                        .payload(
                            ConferenceParticipantSpeakStarted.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                .build()
                        )
                        .recordType(ConferenceParticipantSpeakStarted.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantSpeakStarted(
                conferenceParticipantSpeakStarted
            )

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted())
            .contains(conferenceParticipantSpeakStarted)
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceParticipantSpeakStartedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceParticipantSpeakStarted(
                ConferenceParticipantSpeakStartedWebhookEvent.builder()
                    .data(
                        ConferenceParticipantSpeakStarted.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                ConferenceParticipantSpeakStarted.EventType
                                    .CONFERENCE_PARTICIPANT_SPEAK_STARTED
                            )
                            .payload(
                                ConferenceParticipantSpeakStarted.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callLegId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                    .build()
                            )
                            .recordType(ConferenceParticipantSpeakStarted.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferencePlaybackEnded() {
        val conferencePlaybackEnded =
            ConferencePlaybackEndedWebhookEvent.builder()
                .data(
                    ConferencePlaybackEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(ConferencePlaybackEnded.EventType.CONFERENCE_PLAYBACK_ENDED)
                        .payload(
                            ConferencePlaybackEnded.Payload.builder()
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .mediaName("my_media_uploaded_to_media_storage_api")
                                .mediaUrl("https://www.example.com/audio.mp3")
                                .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                .build()
                        )
                        .recordType(ConferencePlaybackEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferencePlaybackEnded(conferencePlaybackEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).contains(conferencePlaybackEnded)
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferencePlaybackEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferencePlaybackEnded(
                ConferencePlaybackEndedWebhookEvent.builder()
                    .data(
                        ConferencePlaybackEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(ConferencePlaybackEnded.EventType.CONFERENCE_PLAYBACK_ENDED)
                            .payload(
                                ConferencePlaybackEnded.Payload.builder()
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .mediaName("my_media_uploaded_to_media_storage_api")
                                    .mediaUrl("https://www.example.com/audio.mp3")
                                    .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                    .build()
                            )
                            .recordType(ConferencePlaybackEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferencePlaybackStarted() {
        val conferencePlaybackStarted =
            ConferencePlaybackStartedWebhookEvent.builder()
                .data(
                    ConferencePlaybackStarted.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(ConferencePlaybackStarted.EventType.CONFERENCE_PLAYBACK_STARTED)
                        .payload(
                            ConferencePlaybackStarted.Payload.builder()
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .mediaName("my_media_uploaded_to_media_storage_api")
                                .mediaUrl("https://www.example.com/audio.mp3")
                                .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                .build()
                        )
                        .recordType(ConferencePlaybackStarted.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferencePlaybackStarted(conferencePlaybackStarted)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted())
            .contains(conferencePlaybackStarted)
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferencePlaybackStartedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferencePlaybackStarted(
                ConferencePlaybackStartedWebhookEvent.builder()
                    .data(
                        ConferencePlaybackStarted.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                ConferencePlaybackStarted.EventType.CONFERENCE_PLAYBACK_STARTED
                            )
                            .payload(
                                ConferencePlaybackStarted.Payload.builder()
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .mediaName("my_media_uploaded_to_media_storage_api")
                                    .mediaUrl("https://www.example.com/audio.mp3")
                                    .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                    .build()
                            )
                            .recordType(ConferencePlaybackStarted.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceRecordingSaved() {
        val conferenceRecordingSaved =
            ConferenceRecordingSavedWebhookEvent.builder()
                .data(
                    ConferenceRecordingSaved.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(ConferenceRecordingSaved.EventType.CONFERENCE_RECORDING_SAVED)
                        .payload(
                            ConferenceRecordingSaved.Payload.builder()
                                .callControlId(
                                    "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                )
                                .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .channels(ConferenceRecordingSaved.Payload.Channels.SINGLE)
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .format(ConferenceRecordingSaved.Payload.Format.MP3)
                                .publicRecordingUrls(
                                    ConferenceRecordingSaved.Payload.PublicRecordingUrls.builder()
                                        .mp3("http://example.com/recording.mp3")
                                        .wav("http://example.com/recording.wav")
                                        .build()
                                )
                                .recordingEndedAt(
                                    OffsetDateTime.parse("2018-02-02T22:20:27.521992Z")
                                )
                                .recordingId("4577f9a2-cf0e-44f3-ac57-9f95fb03fa47")
                                .recordingStartedAt(
                                    OffsetDateTime.parse("2021-05-11T10:17:03.692107Z")
                                )
                                .recordingUrls(
                                    ConferenceRecordingSaved.Payload.RecordingUrls.builder()
                                        .mp3("http://example.com/recording.mp3")
                                        .wav("http://example.com/recording.wav")
                                        .build()
                                )
                                .build()
                        )
                        .recordType(ConferenceRecordingSaved.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceRecordingSaved(conferenceRecordingSaved)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).contains(conferenceRecordingSaved)
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceRecordingSavedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceRecordingSaved(
                ConferenceRecordingSavedWebhookEvent.builder()
                    .data(
                        ConferenceRecordingSaved.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(
                                ConferenceRecordingSaved.EventType.CONFERENCE_RECORDING_SAVED
                            )
                            .payload(
                                ConferenceRecordingSaved.Payload.builder()
                                    .callControlId(
                                        "v3:MdI91X4lWFEs7IgbBEOT9M4AigoY08M0WWZFISt1Yw2axZ_IiE4pqg"
                                    )
                                    .callSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .channels(ConferenceRecordingSaved.Payload.Channels.SINGLE)
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .format(ConferenceRecordingSaved.Payload.Format.MP3)
                                    .publicRecordingUrls(
                                        ConferenceRecordingSaved.Payload.PublicRecordingUrls
                                            .builder()
                                            .mp3("http://example.com/recording.mp3")
                                            .wav("http://example.com/recording.wav")
                                            .build()
                                    )
                                    .recordingEndedAt(
                                        OffsetDateTime.parse("2018-02-02T22:20:27.521992Z")
                                    )
                                    .recordingId("4577f9a2-cf0e-44f3-ac57-9f95fb03fa47")
                                    .recordingStartedAt(
                                        OffsetDateTime.parse("2021-05-11T10:17:03.692107Z")
                                    )
                                    .recordingUrls(
                                        ConferenceRecordingSaved.Payload.RecordingUrls.builder()
                                            .mp3("http://example.com/recording.mp3")
                                            .wav("http://example.com/recording.wav")
                                            .build()
                                    )
                                    .build()
                            )
                            .recordType(ConferenceRecordingSaved.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceSpeakEnded() {
        val conferenceSpeakEnded =
            ConferenceSpeakEndedWebhookEvent.builder()
                .data(
                    ConferenceSpeakEnded.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(ConferenceSpeakEnded.EventType.CONFERENCE_SPEAK_ENDED)
                        .payload(
                            ConferenceSpeakEnded.Payload.builder()
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                .build()
                        )
                        .recordType(ConferenceSpeakEnded.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofConferenceSpeakEnded(conferenceSpeakEnded)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).contains(conferenceSpeakEnded)
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceSpeakEndedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceSpeakEnded(
                ConferenceSpeakEndedWebhookEvent.builder()
                    .data(
                        ConferenceSpeakEnded.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(ConferenceSpeakEnded.EventType.CONFERENCE_SPEAK_ENDED)
                            .payload(
                                ConferenceSpeakEnded.Payload.builder()
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                    .build()
                            )
                            .recordType(ConferenceSpeakEnded.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofConferenceSpeakStarted() {
        val conferenceSpeakStarted =
            ConferenceSpeakStartedWebhookEvent.builder()
                .data(
                    ConferenceSpeakStarted.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(ConferenceSpeakStarted.EventType.CONFERENCE_SPEAK_STARTED)
                        .payload(
                            ConferenceSpeakStarted.Payload.builder()
                                .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                .connectionId("7267xxxxxxxxxxxxxx")
                                .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                .build()
                        )
                        .recordType(ConferenceSpeakStarted.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofConferenceSpeakStarted(conferenceSpeakStarted)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).contains(conferenceSpeakStarted)
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofConferenceSpeakStartedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofConferenceSpeakStarted(
                ConferenceSpeakStartedWebhookEvent.builder()
                    .data(
                        ConferenceSpeakStarted.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(ConferenceSpeakStarted.EventType.CONFERENCE_SPEAK_STARTED)
                            .payload(
                                ConferenceSpeakStarted.Payload.builder()
                                    .conferenceId("428c31b6-abf3-3bc1-b7f4-5013ef9657c1")
                                    .connectionId("7267xxxxxxxxxxxxxx")
                                    .creatorCallSessionId("428c31b6-7af4-4bcb-b7f5-5013ef9657c1")
                                    .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521Z"))
                                    .build()
                            )
                            .recordType(ConferenceSpeakStarted.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofDeliveryUpdate() {
        val deliveryUpdate =
            DeliveryUpdateWebhookEvent.builder()
                .data(
                    OutboundMessage.builder()
                        .id("86f58db9-0fe3-4adc-9d1f-46e66e6e9323")
                        .eventType(OutboundMessage.EventType.MESSAGE_SENT)
                        .occurredAt(OffsetDateTime.parse("2019-01-23T18:10:02.574Z"))
                        .payload(
                            OutboundMessagePayload.builder()
                                .id("40385f64-5717-4562-b3fc-2c963f66afa6")
                                .addCc(
                                    OutboundMessagePayload.Cc.builder()
                                        .carrier("carrier")
                                        .lineType(OutboundMessagePayload.Cc.LineType.WIRELINE)
                                        .phoneNumber("phone_number")
                                        .status(OutboundMessagePayload.Cc.Status.QUEUED)
                                        .build()
                                )
                                .completedAt(null)
                                .cost(
                                    OutboundMessagePayload.Cost.builder()
                                        .amount("0.0051")
                                        .currency("USD")
                                        .build()
                                )
                                .costBreakdown(
                                    OutboundMessagePayload.CostBreakdown.builder()
                                        .carrierFee(
                                            OutboundMessagePayload.CostBreakdown.CarrierFee
                                                .builder()
                                                .amount("0.00305")
                                                .currency("USD")
                                                .build()
                                        )
                                        .rate(
                                            OutboundMessagePayload.CostBreakdown.Rate.builder()
                                                .amount("0.00205")
                                                .currency("USD")
                                                .build()
                                        )
                                        .build()
                                )
                                .direction(OutboundMessagePayload.Direction.OUTBOUND)
                                .encoding("GSM-7")
                                .addError(
                                    MessagingError.builder()
                                        .code("code")
                                        .title("title")
                                        .detail("detail")
                                        .meta(
                                            MessagingError.Meta.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .source(
                                            MessagingError.Source.builder()
                                                .parameter("parameter")
                                                .pointer("pointer")
                                                .build()
                                        )
                                        .build()
                                )
                                .from(
                                    OutboundMessagePayload.From.builder()
                                        .carrier("TELNYX LLC")
                                        .lineType(OutboundMessagePayload.From.LineType.VO_IP)
                                        .phoneNumber("+18445550001")
                                        .build()
                                )
                                .addMedia(
                                    OutboundMessagePayload.Media.builder()
                                        .contentType(null)
                                        .sha256(null)
                                        .size(null)
                                        .url(
                                            "https://pbs.twimg.com/profile_images/1142168442042118144/AW3F4fFD_400x400.png"
                                        )
                                        .build()
                                )
                                .messagingProfileId("4000eba1-a0c0-4563-9925-b25e842a7cb6")
                                .organizationId("b448f9cc-a842-4784-98e9-03c1a5872950")
                                .parts(1L)
                                .receivedAt(OffsetDateTime.parse("2019-01-23T18:10:02.574Z"))
                                .recordType(OutboundMessagePayload.RecordType.MESSAGE)
                                .sentAt(null)
                                .smartEncodingApplied(true)
                                .subject("From Telnyx!")
                                .addTag("Greetings")
                                .tcrCampaignBillable(true)
                                .tcrCampaignId("TCPA3X7")
                                .tcrCampaignRegistered("REGISTERED")
                                .text("Hello, World!")
                                .addTo(
                                    OutboundMessagePayload.To.builder()
                                        .carrier("T-MOBILE USA, INC.")
                                        .lineType(OutboundMessagePayload.To.LineType.WIRELESS)
                                        .phoneNumber("+18665550001")
                                        .status(OutboundMessagePayload.To.Status.QUEUED)
                                        .build()
                                )
                                .type(OutboundMessagePayload.Type.MMS)
                                .validUntil(null)
                                .webhookFailoverUrl("https://backup.example.com/hooks")
                                .webhookUrl("https://www.example.com/hooks")
                                .build()
                        )
                        .recordType(OutboundMessage.RecordType.EVENT)
                        .build()
                )
                .meta(
                    DeliveryUpdateWebhookEvent.Meta.builder()
                        .attempt(1L)
                        .deliveredTo("https://www.example.com/hooks")
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofDeliveryUpdate(deliveryUpdate)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).contains(deliveryUpdate)
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofDeliveryUpdateRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofDeliveryUpdate(
                DeliveryUpdateWebhookEvent.builder()
                    .data(
                        OutboundMessage.builder()
                            .id("86f58db9-0fe3-4adc-9d1f-46e66e6e9323")
                            .eventType(OutboundMessage.EventType.MESSAGE_SENT)
                            .occurredAt(OffsetDateTime.parse("2019-01-23T18:10:02.574Z"))
                            .payload(
                                OutboundMessagePayload.builder()
                                    .id("40385f64-5717-4562-b3fc-2c963f66afa6")
                                    .addCc(
                                        OutboundMessagePayload.Cc.builder()
                                            .carrier("carrier")
                                            .lineType(OutboundMessagePayload.Cc.LineType.WIRELINE)
                                            .phoneNumber("phone_number")
                                            .status(OutboundMessagePayload.Cc.Status.QUEUED)
                                            .build()
                                    )
                                    .completedAt(null)
                                    .cost(
                                        OutboundMessagePayload.Cost.builder()
                                            .amount("0.0051")
                                            .currency("USD")
                                            .build()
                                    )
                                    .costBreakdown(
                                        OutboundMessagePayload.CostBreakdown.builder()
                                            .carrierFee(
                                                OutboundMessagePayload.CostBreakdown.CarrierFee
                                                    .builder()
                                                    .amount("0.00305")
                                                    .currency("USD")
                                                    .build()
                                            )
                                            .rate(
                                                OutboundMessagePayload.CostBreakdown.Rate.builder()
                                                    .amount("0.00205")
                                                    .currency("USD")
                                                    .build()
                                            )
                                            .build()
                                    )
                                    .direction(OutboundMessagePayload.Direction.OUTBOUND)
                                    .encoding("GSM-7")
                                    .addError(
                                        MessagingError.builder()
                                            .code("code")
                                            .title("title")
                                            .detail("detail")
                                            .meta(
                                                MessagingError.Meta.builder()
                                                    .putAdditionalProperty(
                                                        "foo",
                                                        JsonValue.from("bar"),
                                                    )
                                                    .build()
                                            )
                                            .source(
                                                MessagingError.Source.builder()
                                                    .parameter("parameter")
                                                    .pointer("pointer")
                                                    .build()
                                            )
                                            .build()
                                    )
                                    .from(
                                        OutboundMessagePayload.From.builder()
                                            .carrier("TELNYX LLC")
                                            .lineType(OutboundMessagePayload.From.LineType.VO_IP)
                                            .phoneNumber("+18445550001")
                                            .build()
                                    )
                                    .addMedia(
                                        OutboundMessagePayload.Media.builder()
                                            .contentType(null)
                                            .sha256(null)
                                            .size(null)
                                            .url(
                                                "https://pbs.twimg.com/profile_images/1142168442042118144/AW3F4fFD_400x400.png"
                                            )
                                            .build()
                                    )
                                    .messagingProfileId("4000eba1-a0c0-4563-9925-b25e842a7cb6")
                                    .organizationId("b448f9cc-a842-4784-98e9-03c1a5872950")
                                    .parts(1L)
                                    .receivedAt(OffsetDateTime.parse("2019-01-23T18:10:02.574Z"))
                                    .recordType(OutboundMessagePayload.RecordType.MESSAGE)
                                    .sentAt(null)
                                    .smartEncodingApplied(true)
                                    .subject("From Telnyx!")
                                    .addTag("Greetings")
                                    .tcrCampaignBillable(true)
                                    .tcrCampaignId("TCPA3X7")
                                    .tcrCampaignRegistered("REGISTERED")
                                    .text("Hello, World!")
                                    .addTo(
                                        OutboundMessagePayload.To.builder()
                                            .carrier("T-MOBILE USA, INC.")
                                            .lineType(OutboundMessagePayload.To.LineType.WIRELESS)
                                            .phoneNumber("+18665550001")
                                            .status(OutboundMessagePayload.To.Status.QUEUED)
                                            .build()
                                    )
                                    .type(OutboundMessagePayload.Type.MMS)
                                    .validUntil(null)
                                    .webhookFailoverUrl("https://backup.example.com/hooks")
                                    .webhookUrl("https://www.example.com/hooks")
                                    .build()
                            )
                            .recordType(OutboundMessage.RecordType.EVENT)
                            .build()
                    )
                    .meta(
                        DeliveryUpdateWebhookEvent.Meta.builder()
                            .attempt(1L)
                            .deliveredTo("https://www.example.com/hooks")
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofFaxDelivered() {
        val faxDelivered =
            FaxDelivered.builder()
                .data(
                    FaxDelivered.Data.builder()
                        .id("95479a2e-b947-470a-a88f-2da6dd07ae0f")
                        .eventType(FaxDelivered.Data.EventType.FAX_DELIVERED)
                        .occurredAt(OffsetDateTime.parse("2020-05-05T13:08:22.039204Z"))
                        .payload(
                            FaxDelivered.Data.Payload.builder()
                                .callDurationSecs(25L)
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("234423")
                                .direction(FaxDelivered.Data.Payload.Direction.OUTBOUND)
                                .faxId("f8338808-3dc6-4f2b-942a-5d1f39255784")
                                .from("+17733372107")
                                .mediaName("my_media_uploaded_to_media_storage_api")
                                .originalMediaUrl("http://www.example.com/fax.pdf")
                                .pageCount(2L)
                                .status(FaxDelivered.Data.Payload.Status.DELIVERED)
                                .to("+15107882622")
                                .userId("19a75cea-02c6-4b9a-84fa-c9bc8341feb8")
                                .build()
                        )
                        .recordType(FaxDelivered.Data.RecordType.EVENT)
                        .build()
                )
                .meta(
                    FaxDelivered.Meta.builder()
                        .attempt(1L)
                        .deliveredTo("https://www.example.com/webhooks")
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofFaxDelivered(faxDelivered)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).contains(faxDelivered)
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofFaxDeliveredRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofFaxDelivered(
                FaxDelivered.builder()
                    .data(
                        FaxDelivered.Data.builder()
                            .id("95479a2e-b947-470a-a88f-2da6dd07ae0f")
                            .eventType(FaxDelivered.Data.EventType.FAX_DELIVERED)
                            .occurredAt(OffsetDateTime.parse("2020-05-05T13:08:22.039204Z"))
                            .payload(
                                FaxDelivered.Data.Payload.builder()
                                    .callDurationSecs(25L)
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("234423")
                                    .direction(FaxDelivered.Data.Payload.Direction.OUTBOUND)
                                    .faxId("f8338808-3dc6-4f2b-942a-5d1f39255784")
                                    .from("+17733372107")
                                    .mediaName("my_media_uploaded_to_media_storage_api")
                                    .originalMediaUrl("http://www.example.com/fax.pdf")
                                    .pageCount(2L)
                                    .status(FaxDelivered.Data.Payload.Status.DELIVERED)
                                    .to("+15107882622")
                                    .userId("19a75cea-02c6-4b9a-84fa-c9bc8341feb8")
                                    .build()
                            )
                            .recordType(FaxDelivered.Data.RecordType.EVENT)
                            .build()
                    )
                    .meta(
                        FaxDelivered.Meta.builder()
                            .attempt(1L)
                            .deliveredTo("https://www.example.com/webhooks")
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofFaxFailed() {
        val faxFailed =
            FaxFailed.builder()
                .data(
                    FaxFailed.Data.builder()
                        .id("95479a2e-b947-470a-a88f-2da6dd07ae0f")
                        .eventType(FaxFailed.Data.EventType.FAX_FAILED)
                        .occurredAt(OffsetDateTime.parse("2020-05-05T13:08:22.039204Z"))
                        .payload(
                            FaxFailed.Data.Payload.builder()
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("234423")
                                .direction(FaxFailed.Data.Payload.Direction.OUTBOUND)
                                .failureReason(FaxFailed.Data.Payload.FailureReason.REJECTED)
                                .faxId("f8338808-3dc6-4f2b-942a-5d1f39255784")
                                .from("+17733372107")
                                .mediaName("my_media_uploaded_to_media_storage_api")
                                .originalMediaUrl("http://www.example.com/fax.pdf")
                                .status(FaxFailed.Data.Payload.Status.FAILED)
                                .to("+15107882622")
                                .userId("19a75cea-02c6-4b9a-84fa-c9bc8341feb8")
                                .build()
                        )
                        .recordType(FaxFailed.Data.RecordType.EVENT)
                        .build()
                )
                .meta(
                    FaxFailed.Meta.builder()
                        .attempt(1L)
                        .deliveredTo("https://www.example.com/webhooks")
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofFaxFailed(faxFailed)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).contains(faxFailed)
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofFaxFailedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofFaxFailed(
                FaxFailed.builder()
                    .data(
                        FaxFailed.Data.builder()
                            .id("95479a2e-b947-470a-a88f-2da6dd07ae0f")
                            .eventType(FaxFailed.Data.EventType.FAX_FAILED)
                            .occurredAt(OffsetDateTime.parse("2020-05-05T13:08:22.039204Z"))
                            .payload(
                                FaxFailed.Data.Payload.builder()
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("234423")
                                    .direction(FaxFailed.Data.Payload.Direction.OUTBOUND)
                                    .failureReason(FaxFailed.Data.Payload.FailureReason.REJECTED)
                                    .faxId("f8338808-3dc6-4f2b-942a-5d1f39255784")
                                    .from("+17733372107")
                                    .mediaName("my_media_uploaded_to_media_storage_api")
                                    .originalMediaUrl("http://www.example.com/fax.pdf")
                                    .status(FaxFailed.Data.Payload.Status.FAILED)
                                    .to("+15107882622")
                                    .userId("19a75cea-02c6-4b9a-84fa-c9bc8341feb8")
                                    .build()
                            )
                            .recordType(FaxFailed.Data.RecordType.EVENT)
                            .build()
                    )
                    .meta(
                        FaxFailed.Meta.builder()
                            .attempt(1L)
                            .deliveredTo("https://www.example.com/webhooks")
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofFaxMediaProcessed() {
        val faxMediaProcessed =
            FaxMediaProcessed.builder()
                .data(
                    FaxMediaProcessed.Data.builder()
                        .id("95479a2e-b947-470a-a88f-2da6dd07ae0f")
                        .eventType(FaxMediaProcessed.Data.EventType.FAX_MEDIA_PROCESSED)
                        .occurredAt(OffsetDateTime.parse("2020-05-05T13:08:22.039204Z"))
                        .payload(
                            FaxMediaProcessed.Data.Payload.builder()
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("234423")
                                .direction(FaxMediaProcessed.Data.Payload.Direction.OUTBOUND)
                                .faxId("f8338808-3dc6-4f2b-942a-5d1f39255784")
                                .from("+17733372107")
                                .mediaName("my_media_uploaded_to_media_storage_api")
                                .originalMediaUrl("http://www.example.com/fax.pdf")
                                .status(FaxMediaProcessed.Data.Payload.Status.MEDIA_PROCESSED)
                                .to("+15107882622")
                                .userId("19a75cea-02c6-4b9a-84fa-c9bc8341feb8")
                                .build()
                        )
                        .recordType(FaxMediaProcessed.Data.RecordType.EVENT)
                        .build()
                )
                .meta(
                    FaxMediaProcessed.Meta.builder()
                        .attempt(1L)
                        .deliveredTo("https://www.example.com/webhooks")
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofFaxMediaProcessed(faxMediaProcessed)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).contains(faxMediaProcessed)
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofFaxMediaProcessedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofFaxMediaProcessed(
                FaxMediaProcessed.builder()
                    .data(
                        FaxMediaProcessed.Data.builder()
                            .id("95479a2e-b947-470a-a88f-2da6dd07ae0f")
                            .eventType(FaxMediaProcessed.Data.EventType.FAX_MEDIA_PROCESSED)
                            .occurredAt(OffsetDateTime.parse("2020-05-05T13:08:22.039204Z"))
                            .payload(
                                FaxMediaProcessed.Data.Payload.builder()
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("234423")
                                    .direction(FaxMediaProcessed.Data.Payload.Direction.OUTBOUND)
                                    .faxId("f8338808-3dc6-4f2b-942a-5d1f39255784")
                                    .from("+17733372107")
                                    .mediaName("my_media_uploaded_to_media_storage_api")
                                    .originalMediaUrl("http://www.example.com/fax.pdf")
                                    .status(FaxMediaProcessed.Data.Payload.Status.MEDIA_PROCESSED)
                                    .to("+15107882622")
                                    .userId("19a75cea-02c6-4b9a-84fa-c9bc8341feb8")
                                    .build()
                            )
                            .recordType(FaxMediaProcessed.Data.RecordType.EVENT)
                            .build()
                    )
                    .meta(
                        FaxMediaProcessed.Meta.builder()
                            .attempt(1L)
                            .deliveredTo("https://www.example.com/webhooks")
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofFaxQueued() {
        val faxQueued =
            FaxQueued.builder()
                .data(
                    FaxQueued.Data.builder()
                        .id("95479a2e-b947-470a-a88f-2da6dd07ae0f")
                        .eventType(FaxQueued.Data.EventType.FAX_QUEUED)
                        .occurredAt(OffsetDateTime.parse("2020-05-05T13:08:22.039204Z"))
                        .payload(
                            FaxQueued.Data.Payload.builder()
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("234423")
                                .direction(FaxQueued.Data.Payload.Direction.OUTBOUND)
                                .faxId("f8338808-3dc6-4f2b-942a-5d1f39255784")
                                .from("+17733372107")
                                .mediaName("my_media_uploaded_to_media_storage_api")
                                .originalMediaUrl("http://www.example.com/fax.pdf")
                                .status(FaxQueued.Data.Payload.Status.QUEUED)
                                .to("+15107882622")
                                .userId("19a75cea-02c6-4b9a-84fa-c9bc8341feb8")
                                .build()
                        )
                        .recordType(FaxQueued.Data.RecordType.EVENT)
                        .build()
                )
                .meta(
                    FaxQueued.Meta.builder()
                        .attempt(1L)
                        .deliveredTo("https://www.example.com/webhooks")
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofFaxQueued(faxQueued)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).contains(faxQueued)
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofFaxQueuedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofFaxQueued(
                FaxQueued.builder()
                    .data(
                        FaxQueued.Data.builder()
                            .id("95479a2e-b947-470a-a88f-2da6dd07ae0f")
                            .eventType(FaxQueued.Data.EventType.FAX_QUEUED)
                            .occurredAt(OffsetDateTime.parse("2020-05-05T13:08:22.039204Z"))
                            .payload(
                                FaxQueued.Data.Payload.builder()
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("234423")
                                    .direction(FaxQueued.Data.Payload.Direction.OUTBOUND)
                                    .faxId("f8338808-3dc6-4f2b-942a-5d1f39255784")
                                    .from("+17733372107")
                                    .mediaName("my_media_uploaded_to_media_storage_api")
                                    .originalMediaUrl("http://www.example.com/fax.pdf")
                                    .status(FaxQueued.Data.Payload.Status.QUEUED)
                                    .to("+15107882622")
                                    .userId("19a75cea-02c6-4b9a-84fa-c9bc8341feb8")
                                    .build()
                            )
                            .recordType(FaxQueued.Data.RecordType.EVENT)
                            .build()
                    )
                    .meta(
                        FaxQueued.Meta.builder()
                            .attempt(1L)
                            .deliveredTo("https://www.example.com/webhooks")
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofFaxSendingStarted() {
        val faxSendingStarted =
            FaxSendingStarted.builder()
                .data(
                    FaxSendingStarted.Data.builder()
                        .id("95479a2e-b947-470a-a88f-2da6dd07ae0f")
                        .eventType(FaxSendingStarted.Data.EventType.FAX_SENDING_STARTED)
                        .occurredAt(OffsetDateTime.parse("2020-05-05T13:08:22.039204Z"))
                        .payload(
                            FaxSendingStarted.Data.Payload.builder()
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("234423")
                                .direction(FaxSendingStarted.Data.Payload.Direction.OUTBOUND)
                                .faxId("f8338808-3dc6-4f2b-942a-5d1f39255784")
                                .from("+17733372107")
                                .mediaName("my_media_uploaded_to_media_storage_api")
                                .originalMediaUrl("http://www.example.com/fax.pdf")
                                .status(FaxSendingStarted.Data.Payload.Status.SENDING)
                                .to("+15107882622")
                                .userId("19a75cea-02c6-4b9a-84fa-c9bc8341feb8")
                                .build()
                        )
                        .recordType(FaxSendingStarted.Data.RecordType.EVENT)
                        .build()
                )
                .meta(
                    FaxSendingStarted.Meta.builder()
                        .attempt(1L)
                        .deliveredTo("https://www.example.com/webhooks")
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofFaxSendingStarted(faxSendingStarted)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).contains(faxSendingStarted)
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofFaxSendingStartedRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofFaxSendingStarted(
                FaxSendingStarted.builder()
                    .data(
                        FaxSendingStarted.Data.builder()
                            .id("95479a2e-b947-470a-a88f-2da6dd07ae0f")
                            .eventType(FaxSendingStarted.Data.EventType.FAX_SENDING_STARTED)
                            .occurredAt(OffsetDateTime.parse("2020-05-05T13:08:22.039204Z"))
                            .payload(
                                FaxSendingStarted.Data.Payload.builder()
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("234423")
                                    .direction(FaxSendingStarted.Data.Payload.Direction.OUTBOUND)
                                    .faxId("f8338808-3dc6-4f2b-942a-5d1f39255784")
                                    .from("+17733372107")
                                    .mediaName("my_media_uploaded_to_media_storage_api")
                                    .originalMediaUrl("http://www.example.com/fax.pdf")
                                    .status(FaxSendingStarted.Data.Payload.Status.SENDING)
                                    .to("+15107882622")
                                    .userId("19a75cea-02c6-4b9a-84fa-c9bc8341feb8")
                                    .build()
                            )
                            .recordType(FaxSendingStarted.Data.RecordType.EVENT)
                            .build()
                    )
                    .meta(
                        FaxSendingStarted.Meta.builder()
                            .attempt(1L)
                            .deliveredTo("https://www.example.com/webhooks")
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofInboundMessage() {
        val inboundMessage =
            InboundMessageWebhookEvent.builder()
                .data(
                    InboundMessage.builder()
                        .id("bf6307bd-884d-4c1f-b6ea-c62b8c495d3c")
                        .eventType(InboundMessage.EventType.MESSAGE_RECEIVED)
                        .occurredAt(OffsetDateTime.parse("2019-01-23T18:10:02.574Z"))
                        .payload(
                            InboundMessagePayload.builder()
                                .id("7ee4241c-f127-47e5-9c34-3aac291f8058")
                                .addCc(
                                    InboundMessagePayload.Cc.builder()
                                        .carrier("carrier")
                                        .lineType(InboundMessagePayload.Cc.LineType.WIRELINE)
                                        .phoneNumber("phone_number")
                                        .status(InboundMessagePayload.Cc.Status.QUEUED)
                                        .build()
                                )
                                .completedAt(null)
                                .cost(
                                    InboundMessagePayload.Cost.builder()
                                        .amount("0.0051")
                                        .currency("USD")
                                        .build()
                                )
                                .costBreakdown(
                                    InboundMessagePayload.CostBreakdown.builder()
                                        .carrierFee(
                                            InboundMessagePayload.CostBreakdown.CarrierFee.builder()
                                                .amount("0.00305")
                                                .currency("USD")
                                                .build()
                                        )
                                        .rate(
                                            InboundMessagePayload.CostBreakdown.Rate.builder()
                                                .amount("0.00205")
                                                .currency("USD")
                                                .build()
                                        )
                                        .build()
                                )
                                .direction(InboundMessagePayload.Direction.INBOUND)
                                .encoding("GSM-7")
                                .addError(
                                    MessagingError.builder()
                                        .code("code")
                                        .title("title")
                                        .detail("detail")
                                        .meta(
                                            MessagingError.Meta.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .source(
                                            MessagingError.Source.builder()
                                                .parameter("parameter")
                                                .pointer("pointer")
                                                .build()
                                        )
                                        .build()
                                )
                                .from(
                                    InboundMessagePayload.From.builder()
                                        .carrier("T-MOBILE USA, INC.")
                                        .lineType(InboundMessagePayload.From.LineType.WIRELESS)
                                        .phoneNumber("+18665550001")
                                        .status(InboundMessagePayload.From.Status.RECEIVED)
                                        .build()
                                )
                                .addMedia(
                                    InboundMessagePayload.Media.builder()
                                        .contentType("content_type")
                                        .hashSha256("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx")
                                        .size(0L)
                                        .url("url")
                                        .build()
                                )
                                .messagingProfileId("0f512bda-ae1e-4597-8e11-e5f5686b97d3")
                                .organizationId("b448f9cc-a842-4784-98e9-03c1a5872950")
                                .parts(1L)
                                .receivedAt(OffsetDateTime.parse("2019-01-23T18:10:02.574Z"))
                                .recordType(InboundMessagePayload.RecordType.MESSAGE)
                                .sentAt(null)
                                .subject("From Telnyx!")
                                .addTag("Greetings")
                                .tcrCampaignBillable(true)
                                .tcrCampaignId("TCPA3X7")
                                .tcrCampaignRegistered("REGISTERED")
                                .text("Hello, World!")
                                .addTo(
                                    InboundMessagePayload.To.builder()
                                        .carrier("TELNYX LLC")
                                        .lineType(InboundMessagePayload.To.LineType.VO_IP)
                                        .phoneNumber("+18445550001")
                                        .status(InboundMessagePayload.To.Status.DELIVERED)
                                        .build()
                                )
                                .type(InboundMessagePayload.Type.SMS)
                                .validUntil(null)
                                .webhookFailoverUrl("https://backup.example.com/hooks")
                                .webhookUrl("https://www.example.com/hooks")
                                .build()
                        )
                        .recordType(InboundMessage.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofInboundMessage(inboundMessage)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).contains(inboundMessage)
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofInboundMessageRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofInboundMessage(
                InboundMessageWebhookEvent.builder()
                    .data(
                        InboundMessage.builder()
                            .id("bf6307bd-884d-4c1f-b6ea-c62b8c495d3c")
                            .eventType(InboundMessage.EventType.MESSAGE_RECEIVED)
                            .occurredAt(OffsetDateTime.parse("2019-01-23T18:10:02.574Z"))
                            .payload(
                                InboundMessagePayload.builder()
                                    .id("7ee4241c-f127-47e5-9c34-3aac291f8058")
                                    .addCc(
                                        InboundMessagePayload.Cc.builder()
                                            .carrier("carrier")
                                            .lineType(InboundMessagePayload.Cc.LineType.WIRELINE)
                                            .phoneNumber("phone_number")
                                            .status(InboundMessagePayload.Cc.Status.QUEUED)
                                            .build()
                                    )
                                    .completedAt(null)
                                    .cost(
                                        InboundMessagePayload.Cost.builder()
                                            .amount("0.0051")
                                            .currency("USD")
                                            .build()
                                    )
                                    .costBreakdown(
                                        InboundMessagePayload.CostBreakdown.builder()
                                            .carrierFee(
                                                InboundMessagePayload.CostBreakdown.CarrierFee
                                                    .builder()
                                                    .amount("0.00305")
                                                    .currency("USD")
                                                    .build()
                                            )
                                            .rate(
                                                InboundMessagePayload.CostBreakdown.Rate.builder()
                                                    .amount("0.00205")
                                                    .currency("USD")
                                                    .build()
                                            )
                                            .build()
                                    )
                                    .direction(InboundMessagePayload.Direction.INBOUND)
                                    .encoding("GSM-7")
                                    .addError(
                                        MessagingError.builder()
                                            .code("code")
                                            .title("title")
                                            .detail("detail")
                                            .meta(
                                                MessagingError.Meta.builder()
                                                    .putAdditionalProperty(
                                                        "foo",
                                                        JsonValue.from("bar"),
                                                    )
                                                    .build()
                                            )
                                            .source(
                                                MessagingError.Source.builder()
                                                    .parameter("parameter")
                                                    .pointer("pointer")
                                                    .build()
                                            )
                                            .build()
                                    )
                                    .from(
                                        InboundMessagePayload.From.builder()
                                            .carrier("T-MOBILE USA, INC.")
                                            .lineType(InboundMessagePayload.From.LineType.WIRELESS)
                                            .phoneNumber("+18665550001")
                                            .status(InboundMessagePayload.From.Status.RECEIVED)
                                            .build()
                                    )
                                    .addMedia(
                                        InboundMessagePayload.Media.builder()
                                            .contentType("content_type")
                                            .hashSha256("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx")
                                            .size(0L)
                                            .url("url")
                                            .build()
                                    )
                                    .messagingProfileId("0f512bda-ae1e-4597-8e11-e5f5686b97d3")
                                    .organizationId("b448f9cc-a842-4784-98e9-03c1a5872950")
                                    .parts(1L)
                                    .receivedAt(OffsetDateTime.parse("2019-01-23T18:10:02.574Z"))
                                    .recordType(InboundMessagePayload.RecordType.MESSAGE)
                                    .sentAt(null)
                                    .subject("From Telnyx!")
                                    .addTag("Greetings")
                                    .tcrCampaignBillable(true)
                                    .tcrCampaignId("TCPA3X7")
                                    .tcrCampaignRegistered("REGISTERED")
                                    .text("Hello, World!")
                                    .addTo(
                                        InboundMessagePayload.To.builder()
                                            .carrier("TELNYX LLC")
                                            .lineType(InboundMessagePayload.To.LineType.VO_IP)
                                            .phoneNumber("+18445550001")
                                            .status(InboundMessagePayload.To.Status.DELIVERED)
                                            .build()
                                    )
                                    .type(InboundMessagePayload.Type.SMS)
                                    .validUntil(null)
                                    .webhookFailoverUrl("https://backup.example.com/hooks")
                                    .webhookUrl("https://www.example.com/hooks")
                                    .build()
                            )
                            .recordType(InboundMessage.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofNumberOrderStatusUpdate() {
        val numberOrderStatusUpdate =
            NumberOrderStatusUpdate.builder()
                .data(
                    NumberOrderStatusUpdate.Data.builder()
                        .id("d578b093-a0e7-4b64-b0d3-6b689a6ff170")
                        .eventType("number_order.complete")
                        .occurredAt(OffsetDateTime.parse("2025-08-22T16:23:54.496464Z"))
                        .payload(
                            NumberOrderWithPhoneNumbers.builder()
                                .id("12ade33a-21c0-473b-b055-b3c836e1c292")
                                .billingGroupId("abc85f64-5717-4562-b3fc-2c9600")
                                .connectionId("346789098765567")
                                .createdAt(OffsetDateTime.parse("2018-01-01T00:00:00.000000Z"))
                                .customerReference("MY REF 001")
                                .messagingProfileId("abc85f64-5717-4562-b3fc-2c9600")
                                .addPhoneNumber(
                                    PhoneNumber.builder()
                                        .id("dc8e4d67-33a0-4cbb-af74-7b58f05bd494")
                                        .bundleId("bc8e4d67-33a0-4cbb-af74-7b58f05bd474")
                                        .countryCode("US")
                                        .countryIsoAlpha2("US")
                                        .phoneNumber("+19705555098")
                                        .phoneNumberType(PhoneNumber.PhoneNumberType.LOCAL)
                                        .recordType("number_order_phone_number")
                                        .addRegulatoryRequirement(
                                            SubNumberOrderRegulatoryRequirementWithValue.builder()
                                                .fieldType(
                                                    SubNumberOrderRegulatoryRequirementWithValue
                                                        .FieldType
                                                        .ADDRESS
                                                )
                                                .fieldValue("45f45a04-b4be-4592-95b1-9306b9db2b21")
                                                .recordType("phone_number_regulatory_requirement")
                                                .requirementId(
                                                    "8ffb3622-7c6b-4ccc-b65f-7a3dc0099576"
                                                )
                                                .build()
                                        )
                                        .requirementsMet(true)
                                        .requirementsStatus(PhoneNumber.RequirementsStatus.PENDING)
                                        .status(PhoneNumber.Status.SUCCESS)
                                        .build()
                                )
                                .phoneNumbersCount(1L)
                                .recordType("number_order")
                                .requirementsMet(true)
                                .status(NumberOrderWithPhoneNumbers.Status.PENDING)
                                .addSubNumberOrdersId("string")
                                .updatedAt(OffsetDateTime.parse("2018-01-01T00:00:00.000000Z"))
                                .build()
                        )
                        .recordType("event")
                        .build()
                )
                .meta(
                    NumberOrderStatusUpdate.Meta.builder()
                        .attempt(1L)
                        .deliveredTo("https://sample-api.com/webhook")
                        .build()
                )
                .build()

        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofNumberOrderStatusUpdate(numberOrderStatusUpdate)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).contains(numberOrderStatusUpdate)
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofNumberOrderStatusUpdateRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofNumberOrderStatusUpdate(
                NumberOrderStatusUpdate.builder()
                    .data(
                        NumberOrderStatusUpdate.Data.builder()
                            .id("d578b093-a0e7-4b64-b0d3-6b689a6ff170")
                            .eventType("number_order.complete")
                            .occurredAt(OffsetDateTime.parse("2025-08-22T16:23:54.496464Z"))
                            .payload(
                                NumberOrderWithPhoneNumbers.builder()
                                    .id("12ade33a-21c0-473b-b055-b3c836e1c292")
                                    .billingGroupId("abc85f64-5717-4562-b3fc-2c9600")
                                    .connectionId("346789098765567")
                                    .createdAt(OffsetDateTime.parse("2018-01-01T00:00:00.000000Z"))
                                    .customerReference("MY REF 001")
                                    .messagingProfileId("abc85f64-5717-4562-b3fc-2c9600")
                                    .addPhoneNumber(
                                        PhoneNumber.builder()
                                            .id("dc8e4d67-33a0-4cbb-af74-7b58f05bd494")
                                            .bundleId("bc8e4d67-33a0-4cbb-af74-7b58f05bd474")
                                            .countryCode("US")
                                            .countryIsoAlpha2("US")
                                            .phoneNumber("+19705555098")
                                            .phoneNumberType(PhoneNumber.PhoneNumberType.LOCAL)
                                            .recordType("number_order_phone_number")
                                            .addRegulatoryRequirement(
                                                SubNumberOrderRegulatoryRequirementWithValue
                                                    .builder()
                                                    .fieldType(
                                                        SubNumberOrderRegulatoryRequirementWithValue
                                                            .FieldType
                                                            .ADDRESS
                                                    )
                                                    .fieldValue(
                                                        "45f45a04-b4be-4592-95b1-9306b9db2b21"
                                                    )
                                                    .recordType(
                                                        "phone_number_regulatory_requirement"
                                                    )
                                                    .requirementId(
                                                        "8ffb3622-7c6b-4ccc-b65f-7a3dc0099576"
                                                    )
                                                    .build()
                                            )
                                            .requirementsMet(true)
                                            .requirementsStatus(
                                                PhoneNumber.RequirementsStatus.PENDING
                                            )
                                            .status(PhoneNumber.Status.SUCCESS)
                                            .build()
                                    )
                                    .phoneNumbersCount(1L)
                                    .recordType("number_order")
                                    .requirementsMet(true)
                                    .status(NumberOrderWithPhoneNumbers.Status.PENDING)
                                    .addSubNumberOrdersId("string")
                                    .updatedAt(OffsetDateTime.parse("2018-01-01T00:00:00.000000Z"))
                                    .build()
                            )
                            .recordType("event")
                            .build()
                    )
                    .meta(
                        NumberOrderStatusUpdate.Meta.builder()
                            .attempt(1L)
                            .deliveredTo("https://sample-api.com/webhook")
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofReplacedLinkClick() {
        val replacedLinkClick =
            ReplacedLinkClickWebhookEvent.builder()
                .data(
                    ReplacedLinkClick.builder()
                        .messageId("7ee4241c-f127-47e5-9c34-3aac291f8058")
                        .recordType("link_clicked")
                        .timeClicked(OffsetDateTime.parse("2019-04-01T14:45:45.450Z"))
                        .to("18445550001")
                        .url("https://telnyx.com")
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofReplacedLinkClick(replacedLinkClick)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).contains(replacedLinkClick)
        assertThat(unwrapWebhookEvent.transcription()).isEmpty
    }

    @Test
    fun ofReplacedLinkClickRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofReplacedLinkClick(
                ReplacedLinkClickWebhookEvent.builder()
                    .data(
                        ReplacedLinkClick.builder()
                            .messageId("7ee4241c-f127-47e5-9c34-3aac291f8058")
                            .recordType("link_clicked")
                            .timeClicked(OffsetDateTime.parse("2019-04-01T14:45:45.450Z"))
                            .to("18445550001")
                            .url("https://telnyx.com")
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    @Test
    fun ofTranscription() {
        val transcription =
            TranscriptionWebhookEvent.builder()
                .data(
                    Transcription.builder()
                        .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                        .eventType(Transcription.EventType.CALL_TRANSCRIPTION)
                        .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                        .payload(
                            Transcription.Payload.builder()
                                .callControlId(
                                    "v2:7subYr8fLrXmaAXm8egeAMpoSJ72J3SGPUuome81-hQuaKRf9b7hKA"
                                )
                                .callLegId("5ca81340-5beb-11eb-ae45-02420a0f8b69")
                                .callSessionId("5ca81eee-5beb-11eb-ba6c-02420a0f8b69")
                                .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                .connectionId("1240401930086254526")
                                .transcriptionData(
                                    Transcription.Payload.TranscriptionData.builder()
                                        .confidence(0.977219f)
                                        .isFinal(true)
                                        .transcript("hello this is a test speech")
                                        .transcriptionTrack(
                                            Transcription.Payload.TranscriptionData
                                                .TranscriptionTrack
                                                .INBOUND
                                        )
                                        .build()
                                )
                                .build()
                        )
                        .recordType(Transcription.RecordType.EVENT)
                        .build()
                )
                .build()

        val unwrapWebhookEvent = UnwrapWebhookEvent.ofTranscription(transcription)

        assertThat(unwrapWebhookEvent.callAiGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherMessageHistoryUpdated()).isEmpty
        assertThat(unwrapWebhookEvent.callAiGatherPartialResults()).isEmpty
        assertThat(unwrapWebhookEvent.callAnswered()).isEmpty
        assertThat(unwrapWebhookEvent.callBridged()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callConversationInsightsGenerated()).isEmpty
        assertThat(unwrapWebhookEvent.callDtmfReceived()).isEmpty
        assertThat(unwrapWebhookEvent.callEnqueued()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callForkStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callGatherEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callHangup()).isEmpty
        assertThat(unwrapWebhookEvent.callInitiated()).isEmpty
        assertThat(unwrapWebhookEvent.callLeftQueue()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachineGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumDetectionEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callMachinePremiumGreetingEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingError()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callRecordingTranscriptionSaved()).isEmpty
        assertThat(unwrapWebhookEvent.callReferCompleted()).isEmpty
        assertThat(unwrapWebhookEvent.callReferFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callReferStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callSiprecStopped()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.callSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingFailed()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.callStreamingStopped()).isEmpty
        assertThat(unwrapWebhookEvent.campaignStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceCreated()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceFloorChanged()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantJoined()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantLeft()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantPlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceParticipantSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferencePlaybackStarted()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceRecordingSaved()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakEnded()).isEmpty
        assertThat(unwrapWebhookEvent.conferenceSpeakStarted()).isEmpty
        assertThat(unwrapWebhookEvent.deliveryUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.faxDelivered()).isEmpty
        assertThat(unwrapWebhookEvent.faxFailed()).isEmpty
        assertThat(unwrapWebhookEvent.faxMediaProcessed()).isEmpty
        assertThat(unwrapWebhookEvent.faxQueued()).isEmpty
        assertThat(unwrapWebhookEvent.faxSendingStarted()).isEmpty
        assertThat(unwrapWebhookEvent.inboundMessage()).isEmpty
        assertThat(unwrapWebhookEvent.numberOrderStatusUpdate()).isEmpty
        assertThat(unwrapWebhookEvent.replacedLinkClick()).isEmpty
        assertThat(unwrapWebhookEvent.transcription()).contains(transcription)
    }

    @Test
    fun ofTranscriptionRoundtrip() {
        val jsonMapper = jsonMapper()
        val unwrapWebhookEvent =
            UnwrapWebhookEvent.ofTranscription(
                TranscriptionWebhookEvent.builder()
                    .data(
                        Transcription.builder()
                            .id("0ccc7b54-4df3-4bca-a65a-3da1ecc777f0")
                            .eventType(Transcription.EventType.CALL_TRANSCRIPTION)
                            .occurredAt(OffsetDateTime.parse("2018-02-02T22:25:27.521992Z"))
                            .payload(
                                Transcription.Payload.builder()
                                    .callControlId(
                                        "v2:7subYr8fLrXmaAXm8egeAMpoSJ72J3SGPUuome81-hQuaKRf9b7hKA"
                                    )
                                    .callLegId("5ca81340-5beb-11eb-ae45-02420a0f8b69")
                                    .callSessionId("5ca81eee-5beb-11eb-ba6c-02420a0f8b69")
                                    .clientState("aGF2ZSBhIG5pY2UgZGF5ID1d")
                                    .connectionId("1240401930086254526")
                                    .transcriptionData(
                                        Transcription.Payload.TranscriptionData.builder()
                                            .confidence(0.977219f)
                                            .isFinal(true)
                                            .transcript("hello this is a test speech")
                                            .transcriptionTrack(
                                                Transcription.Payload.TranscriptionData
                                                    .TranscriptionTrack
                                                    .INBOUND
                                            )
                                            .build()
                                    )
                                    .build()
                            )
                            .recordType(Transcription.RecordType.EVENT)
                            .build()
                    )
                    .build()
            )

        val roundtrippedUnwrapWebhookEvent =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(unwrapWebhookEvent),
                jacksonTypeRef<UnwrapWebhookEvent>(),
            )

        assertThat(roundtrippedUnwrapWebhookEvent).isEqualTo(unwrapWebhookEvent)
    }

    enum class IncompatibleJsonShapeTestCase(val value: JsonValue) {
        BOOLEAN(JsonValue.from(false)),
        STRING(JsonValue.from("invalid")),
        INTEGER(JsonValue.from(-1)),
        FLOAT(JsonValue.from(3.14)),
        ARRAY(JsonValue.from(listOf("invalid", "array"))),
    }

    @ParameterizedTest
    @EnumSource
    fun incompatibleJsonShapeDeserializesToUnknown(testCase: IncompatibleJsonShapeTestCase) {
        val unwrapWebhookEvent =
            jsonMapper().convertValue(testCase.value, jacksonTypeRef<UnwrapWebhookEvent>())

        val e = assertThrows<TelnyxInvalidDataException> { unwrapWebhookEvent.validate() }
        assertThat(e).hasMessageStartingWith("Unknown ")
    }
}
