{
  "type": "object",
  "title": "Gather Using Speak Request",
  "required": [
    "voice",
    "payload"
  ],
  "properties": {
    "payload": {
      "description": "The text or SSML to be converted into speech. There is a 3,000 character limit.",
      "type": "string",
      "example": "Say this on the call"
    },
    "invalid_payload": {
      "description": "The text or SSML to be converted into speech when digits don't match the `valid_digits` parameter or the number of digits is not between `min` and `max`. There is a 3,000 character limit.",
      "type": "string",
      "example": "Say this on the call"
    },
    "payload_type": {
      "description": "The type of the provided payload. The payload can either be plain text, or Speech Synthesis Markup Language (SSML).",
      "default": "text",
      "type": "string",
      "enum": [
        "text",
        "ssml"
      ],
      "example": "ssml"
    },
    "service_level": {
      "description": "This parameter impacts speech quality, language options and payload types. When using `basic`, only the `en-US` language and payload type `text` are allowed.",
      "default": "premium",
      "type": "string",
      "enum": [
        "basic",
        "premium"
      ],
      "example": "premium"
    },
    "voice": {
      "description": "Specifies the voice used in speech synthesis.\n\n- Define voices using the format `<Provider>.<Model>.<VoiceId>`. Specifying only the provider will give default values for voice_id and model_id.\n\n **Supported Providers:**\n- **AWS:** Use `AWS.Polly.<VoiceId>` (e.g., `AWS.Polly.Joanna`). For neural voices, which provide more realistic, human-like speech, append `-Neural` to the `VoiceId` (e.g., `AWS.Polly.Joanna-Neural`). Check the [available voices](https://docs.aws.amazon.com/polly/latest/dg/available-voices.html) for compatibility.\n- **Azure:** Use `Azure.<VoiceId>. (e.g. Azure.en-CA-ClaraNeural, Azure.en-CA-LiamNeural, Azure.en-US-BrianMultilingualNeural, Azure.en-US-AvaMultilingualNeural. For a complete list of voices, go to [Azure Voice Gallery](https://speech.microsoft.com/portal/voicegallery).)\n- **ElevenLabs:** Use `ElevenLabs.<ModelId>.<VoiceId>` (e.g., `ElevenLabs.eleven_multilingual_v2.21m00Tcm4TlvDq8ikWAM`). The `ModelId` part is optional. To use ElevenLabs, you must provide your ElevenLabs API key as an integration identifier secret in `\"voice_settings\": {\"api_key_ref\": \"<secret_identifier>\"}`. See [integration secrets documentation](https://developers.telnyx.com/api/secrets-manager/integration-secrets/create-integration-secret) for details. Check [available voices](https://elevenlabs.io/docs/api-reference/get-voices).\n - **Telnyx:** Use `Telnyx.<model_id>.<voice_id>`\n\nFor service_level basic, you may define the gender of the speaker (male or female).",
      "type": "string",
      "example": "Telnyx.KokoroTTS.af"
    },
    "voice_settings": {
      "description": "The settings associated with the voice selected",
      "oneOf": [
        {
          "$ref": "./ElevenLabsVoiceSettings.json"
        }
      ]
    },
    "language": {
      "description": "The language you want spoken. This parameter is ignored when a `Polly.*` voice is specified.",
      "type": "string",
      "enum": [
        "arb",
        "cmn-CN",
        "cy-GB",
        "da-DK",
        "de-DE",
        "en-AU",
        "en-GB",
        "en-GB-WLS",
        "en-IN",
        "en-US",
        "es-ES",
        "es-MX",
        "es-US",
        "fr-CA",
        "fr-FR",
        "hi-IN",
        "is-IS",
        "it-IT",
        "ja-JP",
        "ko-KR",
        "nb-NO",
        "nl-NL",
        "pl-PL",
        "pt-BR",
        "pt-PT",
        "ro-RO",
        "ru-RU",
        "sv-SE",
        "tr-TR"
      ],
      "example": "en-US"
    },
    "minimum_digits": {
      "description": "The minimum number of digits to fetch. This parameter has a minimum value of 1.",
      "default": 1,
      "type": "integer",
      "example": 1,
      "format": "int32"
    },
    "maximum_digits": {
      "description": "The maximum number of digits to fetch. This parameter has a maximum value of 128.",
      "default": 128,
      "type": "integer",
      "example": 10,
      "format": "int32"
    },
    "maximum_tries": {
      "description": "The maximum number of times that a file should be played back if there is no input from the user on the call.",
      "default": 3,
      "type": "integer",
      "example": 3,
      "format": "int32"
    },
    "timeout_millis": {
      "description": "The number of milliseconds to wait for a DTMF response after speak ends before a replaying the sound file.",
      "default": 60000,
      "type": "integer",
      "example": 60000,
      "format": "int32"
    },
    "terminating_digit": {
      "description": "The digit used to terminate input if fewer than `maximum_digits` digits have been gathered.",
      "default": "#",
      "type": "string",
      "example": "#"
    },
    "valid_digits": {
      "description": "A list of all digits accepted as valid.",
      "default": "0123456789#*",
      "type": "string",
      "example": "123"
    },
    "inter_digit_timeout_millis": {
      "description": "The number of milliseconds to wait for input between digits.",
      "default": 5000,
      "type": "integer",
      "example": 10000,
      "format": "int32"
    },
    "client_state": {
      "description": "Use this field to add state to every subsequent webhook. It must be a valid Base-64 encoded string.",
      "type": "string",
      "example": "aGF2ZSBhIG5pY2UgZGF5ID1d"
    },
    "command_id": {
      "description": "Use this field to avoid duplicate commands. Telnyx will ignore any command with the same `command_id` for the same `call_control_id`.",
      "type": "string",
      "example": "891510ac-f3e4-11e8-af5b-de00688a4901"
    }
  },
  "example": {
    "payload": "say this on call",
    "invalid_payload": "say this on call",
    "payload_type": "text",
    "service_level": "premium",
    "voice": "male",
    "language": "arb",
    "minimum_digits": 1,
    "maximum_digits": 10,
    "terminating_digit": "#",
    "valid_digits": "123",
    "inter_digit_timeout_millis": 10000,
    "client_state": "aGF2ZSBhIG5pY2UgZGF5ID1d",
    "command_id": "891510ac-f3e4-11e8-af5b-de00688a4901"
  }
}